
#### 1. BOM(Browser Object Model)

- 모든 서비스는 웹 브라우저를 바탕으로 실행되기 때문에, 웹 서비스 개발은 브라우저와 밀접한 관련이 있다.
	- 이 브라우저와 관련된 객체 집합이 **BOM(브라우저 객체 모델)** 이다.
	- BOM을 이용해서, 브라우저와 관련된 기능을 구성할 수 있다.

- 아래에서 다룰 **DOM은** BOM 중 하나이며, 이 BOM의 최상위객체는 **window**객체이다.
	- window객체는 모든 객체가 소속된 객체이고, 전역 객체이면서 창이나 프레임을 의미한다
	- 아래와 같은 종류가 있다.
		1. `window.screen`: 사용자 환경의 디스플레이 객체
		2. `window.location`: 현재 페이지의 url을 다루는 객체
		3. `window.navigator`: 웹 브라우저 및 브라우저 환경 정보 객체
		4. `window.history`: 현재 브라우저가 접근해왔던 `URL History`(기록)
   
- 참고로, 브라우저에서 제공하는 이 모든 기능을 통틀어 **Web API**라고 한다. Web API는 자바스크립트의 기능은 아니지만 자바스크립트 등에 의해 제어될 수 있도록 브라우저에서 제공하고 있다.


#### 2. DOM(Document Object Model)

- 사용자가 웹 사이트에 접속하면, 웹 브라우저는 HTML 문서를 읽어들이고 해석한다.
	- 이 브라우저가 HTML코드를 해석하는 과정을 **파싱**이라 부른다.

- 이 파싱 작업이 완료되면 화면을 통해 사용자에게 해석된 결과물을 보여준다.
	- 해석한 HTML 코드를 화면에 보여주는 과정을 **렌더링**이라고 부르고, 렌더링 결과로 해석된 결과물에는 DOM이 존재한다.

	- 좀 더 자세히 말하자면, 브라우저는 HTML 코드를 해석하여 HTML 요소들을 **아래 이미지**처럼 트리 형태로 구조화하여 표현하는 웹 문서를 생성한다. 이 트리 전체를 **DOM**이라 하며, 브라우저는 DOM을 통해 화면에 웹 콘텐츠들을 렌더링하게 된다. [(이미지 출처 - 막블로그)](https://otep.tistory.com/34)
		- `HTML 코드 해석 -> HTML 요소를 트리구조로 표현한 DOM 생성 -> DOM 기반 웹 콘텐츠 렌더링`
![[DOM.png]]

- **DOM**은 `HTML/XML` 문서의 프로그래밍 `interface`라고 정의되고 있다. 즉, 문서와 상호작용할 수 있는 API라고 이해할 수 있는 것이다.
	- DOM은 **문서의 구조화된 표현을 제공**하며 프로그래밍 언어가 `XML/HTML`로 작성된 문서 구조에 접근할 수 있는 방법을 제공한다. 즉, 문서 구조, 스타일, 내용 등을 변경할 수 있게 돕는다는 뜻이다.
		- 문서 객체란, `<html>`이나 `<body>` 같은 `HTML 태그`들을 자바스크립트가 이용할 수 있는 **객체**로 만든 것
		- DOM은 `HTML/XML`문서를 자바스크립트로 접근 가능한 **객체**의 집합 형태로 만든 것이라고도 이해할 수 있다. 
	

	- DOM을 구성하는 트리의 요소 하나하나를 **노드(Node)** 라고 부른다.
	- DOM은 `window.document`객체이다. 
		- 즉, DOM은 window객체의 하위 객체가 된다.

- 개발자들은 자바스크립트와 같은 **스크립트 언어**를 이용해 DOM을 수정하고 웹 페이지 요소를 제어할 수 있다.
	- 이렇게 할 수 있는 이유는, 웹 콘텐츠(HTML)요소를 제어 및 조작할 수 있는 **DOM API**라는 것이 제공되고 있기 때문이다.


#### 3. CRP(Critical Rendering Path)

- **CRP**란, 웹 브라우저가 원본 HTML문서를 읽어들인 후, 스타일을 입히고 대화형 페이지로 만들어 뷰포트(Viewport)에 표시하기까지의 과정을 의미한다.

- 대략적인 단계는 아래와 같다.
	1. **파싱**: 브라우저의 렌더링 엔진은 서버로부터 받은 HTML, CSS파일을 해석하는 파싱 과정을 거친다.
	2. **DOM 트리 구축**: 브라우저의 렌더링 엔진은 HTML 문서를 파싱하여, **DOM 트리**를 만든다.
		- **DOM(Document Object Model)** : HTML 요소의 구조화된 표현을 제공하며, 문서 상호작용을 돕는 방법 제공
	
	3. **CSSOM 트리 구축**: 브라우저의 렌더링 엔진은 `<style>` 태그를 만나게 되면, HTML 파싱을 멈추고 CSS파싱 작업을 시작하여 **CSSOM 트리**를 구축한다.
		- **CSSOM(Cascading Style Sheets Object Model)** : HTML 요소들과 연관된 스타일 정보의 구조화된 표현 제공
	
	4. **자바스크립트 실행**
		- 이 과정은 DOM 트리를 구성하는 과정 사이에 일어날 수도 있다.
		- 만약, HTML 파싱 중 자바스크립트를 의미하는 `<script>` 태그나 외부 스크립트 참조 구문을 만나게 되면, DOM 파싱을 중지하고 자바스크립트 엔진에게 제어 권한을 넘겨 스크립트를 실행한다.
		- 그리고, 스크립트 실행이 끝나면 다시 DOM 트리를 그리기 시작한다.
	
	5. **렌더 트리 구축**: DOM트리와 CSSOM 트리를 결합해 렌더 트리를 형성한다.
		- 렌더 트리는 웹 페이지에 표시될 HTML, 스타일 요소로 구성되는 트리이다.
		- 브라우저는 렌더 트리를 생성하기 위해 **DOM, CSSOM** 두 개의 트리를 필요로 한다.
	
	6. **레이아웃 생성**: 렌더 트리가 형성되면, 디바이스의 뷰포트 내에서 노드들의 정확한 위치와 크기를 계산하는 **레이아웃** 단계를 거친다.
	
	7. **페인트(Paint)**
		- 마지막으로, 렌더링 엔진은 페인트 이벤트를 발생시킨다.
		- 해당 단계에서는, 렌더 트리를 탐색하며 레이아웃 단계를 거쳐 알아낸 구성 노드 정보를 이용해, 노드들을 화면에 표시한다.


#### 4. DOM의 필요성

- 그렇다면 DOM은 대체 왜 쓰이는 것일까?
	- HTML코드는 정적인 텍스트이므로, 웹 화면이 사용자와 동적으로 상호작용을 하기 위해서 DOM이 필요하다.

- 앞서 자바스크립트를 활용해 문서 구조에 접근할 수 있고, 상호작용할 수 있다고 말했다.
	- 즉, 문서 내의 각 요소들에 대해 자바스크립트를 활용해 여러 작업을 시도할 수 있는데, 이는 **DOM이 해당 수정 및 제어 작업을 가능하도록 문서의 구조화된 표현을 제공**하고 있기 때문에 가능하다는 것이다.

- 아래는 DOM이 **언제 활용**될 수 있는지를 정리한 것이다.
	1. 뷰포트(Viewport) 에 무엇을 렌더링할지 결정할 때
	2. 자바스크립트로 새로운 HTML 요소나 속성을 추가/제거할 때
	3. 자바스크립트로 HTML 문서의 HTML 요소/속성을 변경할 때
	4. 자바스크립트로 HTML 문서의 CSS 스타일 요소를 변경할 때
	5. 자바스크립트로 HTML 문서에 새로운 HTML 이벤트를 추가할 때
	6. 자바스크립트로 HTML 문서에 작성된 HTML 이벤트에 대해 반응할 때


