
## 1. 자바스크립트와 단일 스레드(Thread)

- 자바스크립트는 싱글 스레드 언어로, 한 번에 하나의 작업만 처리할 수 있다.
	- 그렇기에, 자바스크립트 엔진은 함수 호출 시 실행 컨텍스트가 쌓이는 공간인 콜스택을 하나만 보유하고 있습니다.

- 하지만, 자바스크립트 사용 시, 마치 **멀티 스레드**처럼 동시에 여러 Task를 처리하는 느낌을 받을 때가 많은데, 이는 자바스크립트가 비동기로 작동하는 것이 이유이다.
	- 자바스크립트 자체는 비동기 동작을 지원하지 않으나, 비동기로 동작할 수 있도록 지원을 해주는 곳이 있다.
	- 그 핵심적인 요소가 **브라우저**이다.

---
## 2. 브라우저의 내부 구조

> [이미지 : 브라우저 내부 구조 (출처 : How JavaScript works: an overview of the engine, the runtime, and the call stack)](https://medium.com/sessionstack-blog/how-does-javascript-actually-work-part-1-b0bacc073cf)
![[브라우저 내부 구조.png]]
### 1. 자바스크립트 엔진
#### 1-1. 메모리 힙(Memory Heap)
```js
// 메모리 힙에 저장되는 객체
const obj = { name: "Alice", age: 25 };

// 메모리 힙에 저장되는 배열
const arr = [1, 2, 3, 4, 5];

// 함수도 메모리 힙에 저장
function greet() {
  console.log("Hello!");
}
```
##### ※ 정의
- 자바스크립트 엔진이 동적으로 생성한 객체나 데이터를 저장하고 관리하는 메모리 공간이다.
##### ※ 역할
1. 동적 메모리 할당
	- 객체, 배열, 함수 등 **크기가 가변적인 데이터**를 저장하기 위해 사용된다.
	- 예: 객체 생성, 클로저 등이 필요할 때 메모리 힙을 사용한다.

2. 가비지 컬렉션
	- 메모리 힙에 할당된 데이터 중 더 이상 사용되지 않는 데이터를 정리하여 메모리 누수를 방지한다.

#### 1-2. 콜  스택(Call Stack)
```js
function first() {
  console.log("First function");
  second();
}

function second() {
  console.log("Second function");
  third();
}

function third() {
  console.log("Third function");
}

first();

// first() -> second() -> third() 순 콜스택에 추가
// third() -> second() -> first() 순 콜스택에서 제거
```
##### ※ 정의
- **콜 스택**은 자바스크립트 엔진이 함수 호출을 관리하는 메모리 구조이다.
- 스택(stack) 자료구조를 사용하며, **LIFO(Last In, First Out)** 방식으로 동작한다.
##### ※ 역할
1. 함수 호출 관리
    - 실행 중인 함수와 호출된 함수 정보를 추적한다.

2.  실행 컨텍스트 저장
    - 함수 실행 시 필요한 정보(변수, 객체, this 등)를 저장하고 관리한다.

3. 실행 순서 유지
    - 함수 호출이 끝나면 스택에서 제거하며, 이전 함수로 돌아간다.


### 2. Web APIs

- 자바스크립트 코드에서 비동기 작업(예: HTTP 요청, 타이머 설정, 파일 읽기 등)은 브라우저나 런타임 환경(Node.js)의 **Web API**에 위임하여 처리된다.
	- 각 자바스크립트 코드에 해당하는 실행 컨텍스트는 콜 스택에 올라갔다가 비동기 작업 구문이 발견되면 Web API에 해당 작업들이 위임된다.

- Web API는 브라우저나 런타임 환경이 제공하는 **네이티브 기능의 인터페이스**로, 비동기 작업(예: 타이머, 네트워크 요청 등)을 처리하기 위한 별도의 시스템을 통해 동작한다. 
	- 네이티브 기능의 인터페이스란, 웹 브라우저나 운영 체제에서 제공하는 **기본적인 기능이나 내장된 API**를 **자바스크립트와 같은 고급 언어**에서 접근할 수 있도록 하는 **인터페이스**를 의미한다.
	- 브라우저 내부에서 비동기 작업은 필요에 따라 멀티 스레드를 사용할 수 있다.

#### 2-1. DOM

- **DOM**은 웹 페이지의 구조를 객체로 표현한 것이다. 즉, HTML 문서의 모든 요소와 속성, 텍스트 등을 객체 형태로 나타내어 자바스크립트에서 이를 동적으로 수정하고 조작할 수 있게 해준다.
- 자바스크립트는 DOM을 통해 HTML 요소에 접근하고, 수정하고, 삭제하거나 새로 추가하는 등의 작업을 할 수 있다.