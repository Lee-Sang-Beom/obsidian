
### 1. npm (Node Package Manager)

- **설명**
    - Node.js와 함께 설치되는 기본 패키지 관리자.
    - 전 세계 JavaScript 패키지의 중앙 저장소 역할을 한다.
    - 패키지 설치, 관리, 스크립트 실행 등을 수행한다.

- **기능**
    - **패키지 설치**:
        - `npm install <package-name>` (로컬 설치)
        - `npm install -g <package-name>` (전역 설치)
    - **의존성 관리**: `package.json`을 기반으로 의존성을 관리.
    - **스크립트 실행**: `npm run <script-name>`로 스크립트를 실행.

- **장점**
    - 널리 사용되며 커뮤니티와 문서가 풍부.
    - Node.js와 기본적으로 통합.

- **단점**
    - 느린 속도(최근에는 개선됨).
    - 의존성 중복 문제(이전 버전에서는 더 심각했음).


> **기본적인 의존성 설치 및 관리**
- 프로젝트에서 라이브러리를 설치하고 사용할 때
    `npm install lodash`
    → `lodash` 라이브러리를 프로젝트에 설치.

> **스크립트 실행**
- `package.json`에 정의된 스크립트를 실행할 때
```json
"scripts": {
  "start": "node index.js",
  "build": "webpack"
}
```
- 실행
```bash
npm run start
npm run build
```

> **전역 패키지 설치**
- CLI 툴을 전역으로 설치하여 어디서든 사용 가능
```bash
npm install -g eslint
eslint .  # 코드 린팅 실행
```

---
### 2. npx

- **설명**
    - npm 버전 5.2.0 이후부터 포함된 도구로, **패키지를 설치하지 않고도 실행**할 수 있는 기능을 제공한다.
    - Node.js v16 이후부터는 `npm`에 포함되지 않고 별도로 설치해야 한다.
    - 임시로 패키지를 설치하고 실행하거나, 전역으로 설치된 실행 파일을 호출할 때 사용한다.

- **기능**
    - **로컬 설치 없이 실행**:
        - 예: `npx create-react-app my-app` → CRA 설치 없이 프로젝트 생성.
    
    - **의존성 충돌 방지**: 로컬 프로젝트와 전역 환경의 패키지 버전 충돌을 방지.
    - **임시 실행**: 단기적인 작업이나 테스트 스크립트에 유용.

- **장점**
    - 로컬 설치 필요 없이 간단히 실행.
    - 최신 버전 패키지를 바로 실행.

- **단점**
    - 네트워크가 느릴 경우 실행 속도가 느려질 수 있음.


> **전역 설치 없이 패키지 실행**
- 특정 CLI 도구를 설치하지 않고 실행
    `npx create-react-app my-app`
    → `create-react-app`을 전역 설치하지 않고 바로 React 프로젝트 생성.

> **특정 버전 패키지 실행**
- 특정 버전의 패키지를 실행하고 싶을 때
    `npx webpack@5`
    → `Webpack 5` 버전으로 빌드.

> **임시 작업**
- 번거롭게 설치하지 않고 단일 명령 실행
    `npx cowsay "Hello World"`

---
### 3. pnpm (Performant npm)

- **설명**
    - `npm`과 호환되면서 성능과 디스크 효율성을 개선한 패키지 관리자.
    - 의존성을 중복 없이 저장하는 방식(`content-addressable storage`)을 사용.

- **기능**
    - **패키지 설치**: `pnpm install <package-name>`.
    - **의존성 저장 최적화**: 중복된 패키지를 공유 디렉토리에 저장하여 디스크 공간 절약.
    - **속도 향상**: 병렬 설치로 빠른 속도 제공.

- **장점**
    - 디스크 사용량이 적음.
    - 설치 속도가 빠름.
    - `npm` 및 `yarn`과 호환 가능.

- **단점**
    - 새로운 생태계라 익숙하지 않은 사용자들에게 진입 장벽이 있을 수 있음.


> **빠른 패키지 설치**
- 중복된 의존성 없이 빠르게 설치
    `pnpm install`

> **공유 스토리지를 통한 효율적인 설치**
- 동일한 패키지를 여러 프로젝트에서 사용
    `pnpm add axios`
    → `axios`가 공유 스토리지에서 사용되어 디스크 공간 절약.

> **모노레포 프로젝트 관리**
- 워크스페이스를 활용한 대규모 프로젝트 관리
```bash

# 각 워크스페이스에 특저 ㅇ패키지를 설치한 예시
pnpm add react --filter ./packages/frontend
pnpm add express --filter ./packages/backend
```

---
### 4. yarn

- **설명**
    - Facebook에서 만든 패키지 관리자.
    - `npm`의 대안으로, 속도와 안정성을 개선하기 위해 등장.
    - 현재는 v1(Classic)과 v2/3(버전 관리 방식 변경)이 있다.

- **기능**
    - **패키지 설치**:
        - `yarn add <package-name>` (로컬 설치)
        - `yarn global add <package-name>` (전역 설치).

    - **병렬 설치**: 의존성 설치 속도가 빠름.
    - **의존성 잠금 파일**: `yarn.lock`을 통해 의존성을 정확히 고정.
    - **워크스페이스 지원**: 다중 패키지 프로젝트 관리에 용이.

- **장점**
    - 속도와 안정성.
    - 멀티태스킹을 지원.
    - `npm`과 비교해 좀 더 세밀한 명령어 제공.

- **단점**
    - (버전) v2/3으로 넘어오면서 일부 사용자들이 기존 방식(v1)을 선호.
    - `npm`이 속도 문제를 개선하면서 차별점이 줄어듦.


> **빠른 의존성 설치**
- 속도와 안정성을 강조한 설치
    `yarn add react`

> **워크스페이스 기반 프로젝트 관리**
- 모노레포 프로젝트에서 의존성을 공유
```bash
yarn workspace frontend add axios
yarn workspace backend add express
```

> **의존성 잠금 및 업그레이드**
- `yarn.lock` 파일을 통해 의존성 잠금
    `yarn install`

- 특정 패키지 업그레이드
    `yarn upgrade lodash@latest`

##### ※ 참고 : `yarn install`
- 프로젝트에서 필요한 의존성을 설치하는 데 사용되며, 프로젝트의 `package.json` 및 `yarn.lock` 파일을 참고하여 필요한 모든 패키지를 다운로드하고, 프로젝트 내 `node_modules` 디렉토리에 설치하는 역할을 한다.

> 작동 방식은 아래와 같다.
1. **`package.json` 읽기**  
	- `package.json`에 정의된 의존성을 확인한다.
```json
{
  "dependencies": {
    "react": "^18.0.0",
    "axios": "^1.0.0"
  }
}
```

2. **`yarn.lock` 확인**  
	- 의존성 트리와 정확한 버전을 잠그기 위한 `yarn.lock` 파일을 참고하여 설치한다.
		- `yarn.lock`이 있으면 파일에 기록된 버전 그대로 설치.
		- 없으면 패키지를 다운로드한 후 새로 `yarn.lock` 파일 생성.
	
	- `yarn.lock`은 **의존성 트리와 모든 패키지의 정확한 버전을 고정**한다.

3. **패키지 설치**  
    - 의존성을 `node_modules` 디렉토리에 설치한다.

4. **캐싱 활용**  
    - Yarn은 캐싱 메커니즘을 사용하여 이미 다운로드된 패키지를 다시 다운로드하지 않는다.
    - 덕분에 **설치 속도가 빠르고 네트워크 부하가 줄어드는 효과가 있다**.

---
### 5. 주요 차이점 요약

| 도구     | 주요 역할              | 장점                 | 단점               |
| ------ | ------------------ | ------------------ | ---------------- |
| `npm`  | Node.js 기본 패키지 관리자 | 풍부한 생태계, 기본 제공     | 속도와 디스크 효율성이 낮았음 |
| `npx`  | 로컬 설치 없이 패키지 실행    | 설치 없이 실행, 최신 버전 사용 | 느릴 수 있음          |
| `pnpm` | 성능 최적화된 npm        | 빠른 속도, 디스크 효율성     | 상대적으로 낮은 인지도     |
| `yarn` | 빠르고 안정적인 패키지 관리    | 병렬 설치, 워크스페이스 지원   | 새 버전으로 인한 호환성 문제 |
###### ※ 언제 사용하는게 좋을까?
1. **`npm`**: 기본적인 의존성 관리와 패키지 설치.
2. **`npx`**: 단발성 실행이나 전역 설치 없이 패키지 실행.
3. **`pnpm`**: 디스크 공간이 제한적이거나 성능이 중요한 경우.
4. **`yarn`**: 대규모 프로젝트에서 워크스페이스 관리가 필요한 경우.

--- 

### 참고 : 정확한 버전을 잠근다는 것의 의미 (with `yarn.lock`)

#### 1. 버전 범위 관리

- `package.json`에서 의존성을 지정할 때, 보통 아래와 같은 형식으로 버전을 설정한다.
	- `"lodash": "^4.17.0"`  
	    → **"4.17.0 이상 5.0.0 미만의 버전"**을 허용.
	- `"axios": "~1.2.0"`  
	    → **"1.2.x 버전만"** 허용.

- 하지만, 위와 같이 설정하면 팀의 다른 개발자나 배포 환경에서 **마이너 및 패치 버전이 달라질 수 있다.**  
	- 한 개발자의 환경에서는 `lodash` 버전이 `4.17.21`
	- 다른 환경에서는 `4.17.23`  
	    → 서로 다른 환경이 만들어질 가능성이 있다.


#### 2. yarn.lock 파일 역할

- `yarn.lock`은 **의존성 트리와 모든 패키지의 정확한 버전을 고정**한다.  

- `lodash`의 버전을 `4.17.21`로 고정하는 예시는 아래와 같다.
	- 아래는 4.17.0 이상 5.0.0 미만의 lodash 버전 중 하나를 허용한다는 의미인 `^4.17.0`은 이제,  `"^4.17.0"` 범위 내에서 **정확히 `4.17.21`을 설치하도록 강제**하는 코드가 되었다.
		- 이제, `yarn.lock` 파일이 존재하면 항상 `4.17.21` 버전의 `lodash`가 설치될 것이다.
	
	- 추가적으로, 여기서는 URL을 포함하여 패키지를 다운로드할 정확한 위치까지 명시했다.
```plaintext
lodash@^4.17.0:
  version "4.17.21"
  resolved "https://registry.yarnpkg.com/lodash/-/lodash-4.17.21.tgz"
```

> **효과**
- 팀원 간 동일한 환경 보장.
- 배포 환경에서 예기치 않은 버전 차이 방지.
- 디버깅과 유지보수가 쉬워짐.