
#### 1. React에서의 key란?

- key는 React에서 **element list**를 만들 때 포함해야하는 특수 문자열 속성(attribute)이다.

```tsx
list.map((item, index)=>{
	return <li key={item}>{item}</li>
})
```

#### 2. React에서 key를 쓰는 이유?

 - key는 React에서 페이지에 변경사항이 있어 재렌더링이 발생할 때, 어떤 항목이 **변경/추가/삭제되었는지 식별**하는 것을 돕는다.

- React 입장에서 컴포넌트를 반복해서 렌더링 하는 일은 비효율적인 일이다. 그래서, React는 `setState Action`을 수행할 때 **비동기적 처리 및 배치(batch)** 처리를 수행한다. 
	- 버튼 클릭 시, `onClick()`함수에서 state를 변경하고, 바로 `console.log(변경된 state)`를 수행하면 변경된 결과가 나오지 않는 것이 **배치**의 결과이다. 

 - 따라서, 이전 트리와 이후 트리의 자식들이 일치하는지 빠르게 **인식**(`element`에 **안정적인 고유성** 부여)하고, 그에 따른 **효율적인 DOM 업데이트**(**가상 DOM**을 비교하는 과정)를 위해 필요한 것이 key이다.
	 - 쉽게 말해, 성능 개선이 주요 목표라고 할 수 있다.


#### 3. 주의사항

1. ***key는 중복되지 않아야 한다.***
	- key는 전역적으로 유일해야할 필요는 없지만, **배열 내에서 반복하여 생성**되는 `element`에 대해서는 중복되는 key가 존재해서는 안된다.
	- 배열이 업데이트될 때마다, **key를 기준으로 변경되지 않는 값은 그대로 둔다**고 할 때, key가 같으면 문제가 생기지 않겠는가?

2. ***배열이 재배열되는 경우가 많다면, 배열의 인덱스를 key로 사용해서는 안된다**.*
	- 배열 항목에 명시적으로 key를 지정하지 않으면 **React는 기본적으로 index를 key**로 사용한다.
	- 요소의 추가와 제거에 따라 배열이 재배열되는 것은, 배열의 인덱스 또한 재배치한다는 뜻이며, 이는 index를 key로 지정하는 것은 **안정적이지 않다는 것**을 증명하는 셈이다.
		- 따라서, **안정적이지 않은 값을 key**로 사용하면, 가상 DOM을 비교하는 과정에서 결국 리스트를 순차적으로 비교하며 변화를 감지하게 된다. 
		- 동시에, 연속된 리스트 요소에 대하여, `state` match가 정상적으로 일어나지 않을 수도 있다.
			- 이는 **재조정**(Relconciliation)과 [관련](https://velog.io/@yeonbot/React%EC%97%90%EC%84%9C-key%EC%9D%98-%EC%97%AD%ED%95%A0-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8%EB%A5%BC-%EB%8B%A4%EC%8B%9C%EA%B7%B8%EB%A6%AC%EB%8A%94-%EA%B3%BC%EC%A0%95)이 있다.

3. ***랜덤하게 생성된 값을 사용해서는 안된다.***
	-  랜덤하게 생성된 값을 key로 사용하는 경우, **많은 컴포넌트 인스턴스와 DOM 노드**를 불필요하게 재생성하여 성능상 악영향을 끼치거나, 자식 컴포넌트의 `state`가 유실되는 문제가 발생할 수 있다.