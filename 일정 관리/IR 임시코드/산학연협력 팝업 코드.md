
```javascript
(function () {  
  
    return {  
  
        htmlLoading : false,  
        cssLoading : false,  
  
        onConstruct: function (jLayout, path, object, jPopupListLayout) {  
  
            var popup = this;  
  
            PopupHelper.appendLayout(popup, {  
                title: ' 참여기업 관리',  
                css: {width: '1200px'}  
            });  
        },  
  
        onInit: function (jLayout, path, object, jPopupListLayout) {  
  
            var page = this;  
            var popup = this;  
  
            var jContent = popup.find('.popup_content');  
            page.item = Lia.p(object,'item');  
            popup.onCompleted = Lia.p(object, 'onCompleted');  
  
            var section = new Triton.Section({  
                appendTo: jContent  
            });  
  
            var panel = new Triton.Panel({  
                appendTo: section  
            });  
  
            var detailTable = new Triton.DetailTable({  
                appendTo: panel  
            });  
  
            detailTable.appendRow({});  
            detailTable.appendKeyColumn({content: '사업참여', attr:{rowSpan: 6}});  
            detailTable.appendKeyColumn({content: '인력양성', attr:{colSpan: 8}});  
            detailTable.appendRow({});  
            detailTable.appendKeyColumn({content: '표준 현장실습'});  
  
            var humanResourcesDevelopmentJsonString = Lia.p(page.item, 'human_resources_development');  
            var humanResourcesDevelopmentJsonData =  null;  
  
            var standardFieldPractice = null;  
            var capstoneDesign =  null;  
            var humanResourcesDevelopmentEtc = null;  
  
            if(humanResourcesDevelopmentJsonString != null){  
                humanResourcesDevelopmentJsonData = JSON.parse(humanResourcesDevelopmentJsonString);  
  
                standardFieldPractice = humanResourcesDevelopmentJsonData.standard_field_practice;  
                capstoneDesign = humanResourcesDevelopmentJsonData.capstone_design;  
                humanResourcesDevelopmentEtc = humanResourcesDevelopmentJsonData.etc;  
            }  
  
            detailTable.appendValueColumn({  
                content: new Triton.CheckBox({  
                    addClass: 'humanResourcesDevelopment',  
                    pressed: standardFieldPractice == 'Y' ? true : false,  
                }), css: {'width': '50px'}  
            });  
  
            detailTable.appendKeyColumn({content: '캡스톤 디자인'});  
            detailTable.appendValueColumn({  
                content: new Triton.CheckBox({  
                    addClass: 'humanResourcesDevelopment',  
                    pressed: capstoneDesign == 'Y' ? true : false,  
                }), css: {'width': '50px'}  
            });  
  
            detailTable.appendKeyColumn({content: '기타'});  
            detailTable.appendValueColumn({  
                content: new Triton.TextInput({  
                    addClass: 'humanResourcesDevelopment',  
                    theme: Triton.TextInput.Theme.Full,  
                    value : humanResourcesDevelopmentEtc,  
                }),attr:{colspan:'3'}  
            });  
  
            detailTable.appendRow({});  
            detailTable.appendKeyColumn({content: '기술개발 및 사업화',attr:{colSpan: 8}});  
  
            var technologyDevelopmentJsonString = Lia.p(page.item, 'technology_development');  
            var technologyDevelopmentJsonData = null;  
  
            var sharedEquipmentUtilizationSupport = null;  
            var technologyTransfer = null;  
            var jointTechnologyDevelopment = null;  
            var prototypeProductionSupportProject = null;  
            var industrialCollaborationCenterSupportProgram = null;  
            var industryAcademiaCollaborationConsultativeGroupSupport = null;  
            var sharedEquipmentUtilizationSupport = null;  
            var industrialEmployeeEducationSupport = null;  
            var patentRegistrationAndApplicationSupport = null;  
            var customizedConsultingSupport = null;  
            var paidSubsidiaryCompany = null;  
            var etc = null;  
  
            if(technologyDevelopmentJsonString != null){  
                technologyDevelopmentJsonData = JSON.parse(technologyDevelopmentJsonString);  
  
                sharedEquipmentUtilizationSupport = technologyDevelopmentJsonData.industry_academia_collaborative_research;  
                technologyTransfer = technologyDevelopmentJsonData.technology_transfer;  
                jointTechnologyDevelopment = technologyDevelopmentJsonData.joint_technology_development;  
                prototypeProductionSupportProject = technologyDevelopmentJsonData.prototype_production_support_project;  
                industrialCollaborationCenterSupportProgram = technologyDevelopmentJsonData.industrial_collaboration_center_support_program;  
                industryAcademiaCollaborationConsultativeGroupSupport = technologyDevelopmentJsonData.industry_academia_collaboration_consultative_group_support;  
                sharedEquipmentUtilizationSupport = technologyDevelopmentJsonData.shared_equipment_utilization_support;  
                industrialEmployeeEducationSupport = technologyDevelopmentJsonData.industrial_employee_education_support;  
                patentRegistrationAndApplicationSupport = technologyDevelopmentJsonData.patent_registration_and_application_support;  
                customizedConsultingSupport = technologyDevelopmentJsonData.customized_consulting_support;  
                paidSubsidiaryCompany = technologyDevelopmentJsonData.paid_subsidiary_company;  
                etc = technologyDevelopmentJsonData.etc;  
            }  
  
  
            detailTable.appendRow({});  
            detailTable.appendKeyColumn({content: '산학공동연구'});  
            detailTable.appendValueColumn({  
                content: new Triton.CheckBox({  
                    addClass: 'technologyDevelopment',  
                    pressed: sharedEquipmentUtilizationSupport == 'Y' ? true : false,  
                }), css: {'width': '50px'}  
            });  
            detailTable.appendKeyColumn({content: '기술이전'});  
            detailTable.appendValueColumn({  
                content: new Triton.CheckBox({  
                    addClass: 'technologyDevelopment',  
                    pressed: technologyTransfer == 'Y' ? true : false,  
                }), css: {'width': '50px'}  
            });  
            detailTable.appendKeyColumn({content: '산학공동기술 <br/>개발과제'});  
            detailTable.appendValueColumn({  
                content: new Triton.CheckBox({  
                    addClass: 'technologyDevelopment',  
                    pressed: jointTechnologyDevelopment == 'Y' ? true : false,  
                }), css: {'width': '50px'}  
            });  
            detailTable.appendKeyColumn({content: '시제품제작<br/>지원과제'});  
            detailTable.appendValueColumn({  
                content: new Triton.CheckBox({  
                    addClass: 'technologyDevelopment',  
                    pressed: prototypeProductionSupportProject == 'Y' ? true : false,  
                }), css: {'width': '50px'}  
            });  
  
            detailTable.appendRow({});  
            detailTable.appendKeyColumn({content: '기업협업센터(ICC)지원사업'});  
            detailTable.appendValueColumn({  
                content: new Triton.CheckBox({  
                    addClass: 'technologyDevelopment',  
                    pressed: industrialCollaborationCenterSupportProgram == 'Y' ? true : false,  
                }), css: {'width': '50px'}  
            });  
            detailTable.appendKeyColumn({content: '산학연협력 <br/>협의체 지원'});  
            detailTable.appendValueColumn({  
                content: new Triton.CheckBox({  
                    addClass: 'technologyDevelopment',  
                    pressed: industryAcademiaCollaborationConsultativeGroupSupport == 'Y' ? true : false,  
                }), css: {'width': '50px'}  
            });  
            detailTable.appendKeyColumn({content: '공용장비 <br/>활용 지원'});  
            detailTable.appendValueColumn({  
                content: new Triton.CheckBox({  
                    addClass: 'technologyDevelopment',  
                    pressed: sharedEquipmentUtilizationSupport == 'Y' ? true : false,  
                }), css: {'width': '50px'}  
            });  
            detailTable.appendKeyColumn({content: '산업체 재직자<br/>교육지원'});  
            detailTable.appendValueColumn({  
                content: new Triton.CheckBox({  
                    addClass: 'technologyDevelopment',  
                    pressed: industrialEmployeeEducationSupport == 'Y' ? true : false,  
                }), css: {'width': '50px'}  
            });  
  
            detailTable.appendRow({});  
            detailTable.appendKeyColumn({content: '특허등록 및 <br/>출원지원'});  
            detailTable.appendValueColumn({  
                content: new Triton.CheckBox({  
                    addClass: 'technologyDevelopment',  
                    pressed: patentRegistrationAndApplicationSupport == 'Y' ? true : false,  
                }), css: {'width': '50px'}  
            });  
            detailTable.appendKeyColumn({content: '맞춤형<br/>컨설팅지원'});  
            detailTable.appendValueColumn({  
                content: new Triton.CheckBox({  
                    addClass: 'technologyDevelopment',  
                    pressed: customizedConsultingSupport == 'Y' ? true : false,  
                }), css: {'width': '50px'}  
            });  
            detailTable.appendKeyColumn({content: '유료 가족회사'});  
            detailTable.appendValueColumn({  
                content: new Triton.CheckBox({  
                    addClass: 'technologyDevelopment',  
                    pressed: paidSubsidiaryCompany == 'Y' ? true : false,  
                }), css: {'width': '50px'}  
            });  
            detailTable.appendKeyColumn({content: '기타'});  
            detailTable.appendValueColumn({  
                content: new Triton.TextInput({  
                    addClass: 'technologyDevelopment',  
                    theme: Triton.TextInput.Theme.Full,  
                    css: {'width': '200px'},  
                    value : etc,  
                })  
            });  
  
            //기업현황  
            detailTable.appendRow({});  
            detailTable.appendKeyColumn({content: '기업현황', attr:{rowSpan: 6}});  
            detailTable.appendKeyColumn({content: '업체명'});  
            detailTable.appendValueColumn({  
                content: new Triton.TextInput({  
                    form : { name : 'name'},  
                    theme: Triton.TextInput.Theme.Full,  
                    // css: {'width': '300px'},  
                    value : Lia.pcd('', page.item, 'name'),  
                }),  
                attr:{colspan:'3'}  
            });  
            detailTable.appendKeyColumn({content: '사업자<br/>등록번호'});  
            detailTable.appendValueColumn({  
                content: new Triton.TextInput({  
                    form : { name : 'business_registration_number'},  
                    theme: Triton.TextInput.Theme.Full,  
                    // css: {'width': '200px'},  
                    value : Lia.pcd('', page.item, 'business_registration_number'),  
                }),  
                attr:{colspan:'3'}  
            });  
  
            detailTable.appendRow({});  
            detailTable.appendKeyColumn({content: '대표자명'});  
            detailTable.appendValueColumn({  
                content: new Triton.TextInput({  
                    form : { name : 'ceo_name'},  
                    theme: Triton.TextInput.Theme.Full,  
                    // css: {'width': '300px'},  
                    value : Lia.pcd('', page.item, 'ceo_name'),  
                }),  
                attr:{colspan:'3'}  
            });  
            detailTable.appendKeyColumn({content: '업종/품목'});  
            detailTable.appendValueColumn({  
                content: new Triton.TextInput({  
                    form : { name : 'industry'},  
                    theme: Triton.TextInput.Theme.Full,  
                    // css: {'width': '200px'},  
                    value : Lia.pcd('', page.item, 'industry'),  
                }),  
                attr:{colspan:'3'}  
            });  
  
            detailTable.appendRow({});  
            detailTable.appendKeyColumn({content: '주소'});  
            detailTable.appendValueColumn({  
                content: new Triton.TextInput({  
                    form : { name : 'address'},  
                    theme: Triton.TextInput.Theme.Full,  
                    // css: {'width': '300px'},  
                    value : Lia.pcd('', page.item, 'address'),  
                }),  
                attr:{colspan:'3'}  
            });  
            detailTable.appendKeyColumn({content: '대표전화'});  
            detailTable.appendValueColumn({  
                content: new Triton.TextInput({  
                    form : { name : 'phone_number'},  
                    theme: Triton.TextInput.Theme.Full,  
                    // css: {'width': '300px'},  
                    value : Lia.pcd('', page.item, 'phone_number'),  
                }),  
                attr:{colspan:'3'}  
            });  
  
            detailTable.appendRow({});  
            detailTable.appendKeyColumn({content: 'E-MAIL'});  
            detailTable.appendValueColumn({  
                content: new Triton.TextInput({  
                    form : { name : 'email'},  
                    theme: Triton.TextInput.Theme.Full,  
                    // css: {'width': '300px'},  
                    value : Lia.pcd('', page.item, 'email'),  
                }),  
                attr:{colspan:'3'}  
            });  
  
            detailTable.appendKeyColumn({content: '홈페이지'});  
            detailTable.appendValueColumn({  
                content: new Triton.TextInput({  
                    form : { name : 'homepage_url'},  
                    theme: Triton.TextInput.Theme.Full,  
                    // css: {'width': '200px'},  
                    value : Lia.pcd('', page.item, 'homepage_url'),  
                }),  
                attr:{colspan:'3'}  
            });  
  
            detailTable.appendRow({});  
            detailTable.appendKeyColumn({content: '첨부파일'});  
            detailTable.appendValueColumn({  
                content: page.uploader = new Triton.Uploader({  
                    addClass: 'item_attachment',  
                    // attr: {  
                    //     'is_required': false,                    // },                    parameterMap: {  
                        categoryCode: UploadedFileCategory.TEMPORARY_PUBLIC  
                    },  
                }),attr:{colSpan : 7}  
            });  
  
            var attachmentList = Lia.p(page.item,'attachment_list');  
            if( Array.isNotEmpty(attachmentList)) {  
                page.uploader.setAttachmentList(attachmentList);  
            }  
  
            var buttonSection = new Triton.ButtonSection({  
                appendTo: section  
            });  
  
            buttonSection.appendToRight(new Triton.FlatButton({  
                theme: Triton.FlatButton.Theme.Normal,  
                content: '저장',  
                onClick: function () {  
  
                    var param = Triton.extractFormData(page.get());  
                    param = FormatHelper.arrayKeyToCamel(param);  
                    param['attachmentList'] = JSON.stringify(page.uploader.getAttachmentList());  
  
                    if( page.item != undefined){  
                        param['id'] = Lia.p(page.item, 'id');  
                    }  
  
  
                    var humanResourcesDevelopment = [];  
                    var technologyDevelopment = [];  
                    var humanResourcesDevelopmentCount = 0;  
                    var technologyDevelopmentCount = 0;  
  
  
                    for(var idx = 0,  l = page.find('.humanResourcesDevelopment').length; idx < l; idx++){  
  
                        var triton = page.find('.humanResourcesDevelopment').eq(idx).getTriton();  
  
                        if(idx == 2){  
                            if(String.isNotBlank(triton.getValue())){  
                                humanResourcesDevelopment.push(triton.getValue());  
                                humanResourcesDevelopmentCount++  
                            }else {  
                                humanResourcesDevelopment.push( null);  
                            }  
                            continue  
                        }  
                        if(triton.getValue()){  
                            humanResourcesDevelopment.push("Y");  
                            humanResourcesDevelopmentCount++  
                        }else {  
                            humanResourcesDevelopment.push(null);  
                        }  
  
                    }  
  
                    for(var idx = 0,  l = page.find('.technologyDevelopment').length; idx < l; idx++){  
  
                        var triton = page.find('.technologyDevelopment').eq(idx).getTriton();  
  
                        if(idx == 11){  
                            if(String.isNotBlank(triton.getValue())){  
                                technologyDevelopment.push(triton.getValue());  
                                technologyDevelopmentCount++  
                            }else {  
                                technologyDevelopment.push( null);  
                            }  
                            continue  
                        }  
                        if(triton.getValue()){  
                            technologyDevelopment.push("Y");  
                            technologyDevelopmentCount++  
                        }else {  
                            technologyDevelopment.push(null);  
                        }  
  
                    }  
  
                    // if(humanResourcesDevelopmentCount >= 1){  
                    //     param['humanResourcesDevelopment'] = JSON.stringify(humanResourcesDevelopment);                    // } else {                    //     PopupManager.alert('안내', ' 인력양성을 선택하세요.');  
                    //     return;                    // }                    // if(technologyDevelopmentCount >= 1){                    //     param['technologyDevelopment'] = JSON.stringify(technologyDevelopment);                    // } else {                    //     PopupManager.alert('안내', ' 기술개발 및 사업화를 선택하세요.');  
                    //     return;                    // }  
                    if (String.isNullOrWhitespace(param['name'])) {  
                        PopupManager.alert('안내', ' 업체명을 입력해주세요.');  
                        return;  
                    }  
                    if ( String.isNullOrWhitespace(param['businessRegistrationNumber'])) {  
                        PopupManager.alert('안내', '사업자 등록번호를 입력해주세요.');  
                        return;  
                    }  
                    if ( String.isNullOrWhitespace(param['ceoName'])) {  
                        PopupManager.alert('안내', '대표자명을 입력해주세요.');  
                        return;  
                    }  
                    if ( String.isNullOrWhitespace(param['industry'])) {  
                        PopupManager.alert('안내', '업종/품목을 입력해주세요.');  
                        return;  
                    }  
                    if ( String.isNullOrWhitespace(param['address'])) {  
                        PopupManager.alert('안내', '주소를 입력해주세요.');  
                        return;  
                    }  
                    // if ( String.isNullOrWhitespace(param['phoneNumber'])) {  
                    //     PopupManager.alert('안내', '대표전화를 입력해주세요.');  
                    //     return;                    // }                    // if ( String.isNullOrWhitespace(param['email'])) {                    //     PopupManager.alert('안내', '이메일을 입력해주세요.');  
                    //     return;                    // }                    // if ( String.isNullOrWhitespace(param['homepageUrl'])) {                    //     PopupManager.alert('안내', '홈페이지를 입력해주세요.');  
                    //     return;                    // }  
                    if(Lia.p(page.item, 'id') != null){  
                        Requester.awb(ProjectApiUrl.Project.EDIT_INDUSTRY_ACADEMIA_MANAGE_COMPANY, param, function (status, data, request) {  
  
                            LoadingPopupManager.hide();  
  
                            if (status != Requester.Status.SUCCESS) {  
                                return;  
                            }  
                            if ( popup.onCompleted != undefined ) {  
                                popup.onCompleted();  
                            }  
                            popup.hide();  
                        });  
                    }else {  
                        Requester.awb(ProjectApiUrl.Project.ADD_INDUSTRY_ACADEMIA_MANAGE_COMPANY, param, function (status, data, request) {  
  
                            LoadingPopupManager.hide();  
  
                            if (status != Requester.Status.SUCCESS) {  
                                return;  
                            }  
                            if ( popup.onCompleted != undefined ) {  
                                popup.onCompleted();  
                            }  
                            popup.hide();  
                        });  
                    }  
                }  
            }));  
            buttonSection.appendToRight(new Triton.FlatButton({  
                theme: Triton.FlatButton.Theme.Delete,  
                content: '취소',  
                onClick: function () {  
  
                    popup.hide();  
                }  
            }));  
  
            popup.adjustPopup();  
        },  
  
        onShow: function (jLayout, path, parameterMap, jPopupListLayout) {  
            var popup = this;  
  
        },  
        onHide: function (jLayout, path, parameterMap, jPopupListLayout) {  
        }    };  
})();
```