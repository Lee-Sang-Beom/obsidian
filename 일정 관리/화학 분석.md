https://www.daleseo.com/http-cookies/

### 내일와서 할것(2/9)
 - 지도 시큐리티 및 정확도 추가
 - 리포트 오류 추가
 - 사고대응정보 화학물질란 수정


#### 오류
- 확산 미선택 시, 증기밀도 유효성을 검사하는 오류
### 임시저장

```tsx
"use client";
import Input from "@/components/common/Input/Input";
import styles from "./AddCrisisResponse.module.scss";
import {
  AcdntInfoDetailResponse,
  RegisterAcdntInfoCommand,
  SearchCompanyChemWithFilterCommand,
} from "@/types/sub/Ca/CrisisResponse";
import { useForm } from "react-hook-form";
import DateTimeInput from "@/components/common/DateInput/DateTimeInput";
import moment from "moment";
import TextArea from "@/components/common/TextArea/TextArea";
import { Button } from "@/components/common/Button/Button";
import { useRouter } from "next/navigation";
import { EnumType, InputErrorMsgType } from "@/types/common/commonType";
import { SetStateAction, useEffect, useRef, useState } from "react";
import { useAutoAlert } from "@/hooks/Alert/useAutoAlert";
import Table, { TableHeader } from "@/components/common/Table/Table";
import Dialog from "@/components/common/Dialog/Dialog";
import {
  CompanyChemResponse,
  CompanyResponse,
  SearchCompanyCommand,
} from "@/types/sub/Sm/SysCompany";
import SearchBox from "@/components/common/SearchBox/SearchBox";
import CommonSelect, {
  commonSelectType,
} from "@/components/common/CommonSelect/CommonSelect";
import SearchBoxLine from "@/components/common/SearchBox/SearchBoxLine";
import { useCompanyPage } from "@/hooks/sub/Sm/useCompanyPage";
import { CommonCheckBox } from "@/components/common/CommonCheckBox/CommonCheckBox";
import PagingComponent from "@/components/common/pagingComponent/PagingComponent";
import { chemicalSelectSearchFilter } from "@/types/common/filter/filter";
import { useCompanyChemPage } from "@/hooks/sub/Ca/useCompanyChemPage";
import ChipButton from "@/components/common/Chip/ChipButton";

interface IProps {
  modi: boolean;
  selectCompanyDataList: EnumType<string>[];
  selectChemDataList: EnumType<string>[];
  data?: AcdntInfoDetailResponse | null;
  onlyRead: string;
}
export default function AddCrisisResponseClient({
  modi,
  data,
  onlyRead,
  selectCompanyDataList,
  selectChemDataList,
}: IProps) {
  const router = useRouter();
  const { setIsChange, setText, setStatus } = useAutoAlert();

  // 다이얼로그
  const [openCompany, setOpenCompany] = useState<boolean>(false);
  const [openChem, setOpenChem] = useState<boolean>(false);
  const companyRef = useRef<any>(null);
  const chemRef1 = useRef<any>(null);

  /**
   * 1. 기본입력
   */
  const {
    register,
    formState: { errors },
    getValues,
    setValue,
    watch,
    trigger,
  } = useForm<RegisterAcdntInfoCommand>({
    mode: "all",
    defaultValues: {
      acdntDt: moment(new Date()).format("YYYY-MM-DD HH:mm"),
      acdntCn: "",
      acdntEntNm: "",
      entAddr: "",
      acdntType: "",
      acdntCause: "",
      acdntMttr: "",
      lkgSz: "",
      acdntPlc: "",
    },
  });

  const [acdntEntNmEffectiveness, setAcdntEntNmEffectiveness] =
    useState<InputErrorMsgType>({
      isSuccess: true,
      msg: "",
    });
  const [entAddrEffectiveness, setEntAddrEffectiveness] =
    useState<InputErrorMsgType>({
      isSuccess: true,
      msg: "",
    });
  const [acdntTypeEffectiveness, setAcdntTypeEffectiveness] =
    useState<InputErrorMsgType>({
      isSuccess: true,
      msg: "",
    });
  const [acdntCauseEffectiveness, setAcdntCauseEffectiveness] =
    useState<InputErrorMsgType>({
      isSuccess: true,
      msg: "",
    });
  const [acdntMttrEffectiveness, setAcdntMttrEffectiveness] =
    useState<InputErrorMsgType>({
      isSuccess: true,
      msg: "",
    });

  /**
   * 2. 취급업체 데이터
   */
  const [companySearchObj, setCompanySearchObj] =
    useState<SearchCompanyCommand>({
      page: 0,
      size: 5,
      sort: "companyNm",
      orderBy: "desc",
      companySearchType: "TPBIZ_NM",
      searchKeyWord: "",
    });
  const [searchTypeList, setSearchTypeList] = useState<commonSelectType[]>([]);
  const [selectCompanyData, setSelectCompanyData] = useState<
    "TPBIZ_NM" | "COMPANY_NM" | "BIZ_NO" | "ROAD_NM_ADDR"
  >("TPBIZ_NM");
  const [searchCompanyKeyWord, setSearchCompanyKeyWord] = useState<string>("");

  // 취급업체 데이터 Hook
  const companyQuery = useCompanyPage(companySearchObj);

  // 테이블에서 선택된 취급업체
  const [selectCompany, setSelectCompany] = useState<
    CompanyResponse | undefined
  >(undefined);

  // 화학물질 선택 전, company가 선택되었는지 검사
  const [checkSelectCompany, setCheckSelectCompany] = useState<boolean>(false);

  // 취급업체 검색방법 필터 타입을 commonSelctType으로 변경
  useEffect(() => {
    if (selectCompanyDataList) {
      const list: commonSelectType[] = selectCompanyDataList.map((item) => {
        return { group: "", name: item.name, value: item.type };
      });

      setSearchTypeList(list);
    }
    if (selectChemDataList) {
      const list: commonSelectType[] = selectChemDataList.map((item) => {
        return { group: "", name: item.name, value: item.type };
      });

      setSearchTypeList2(list);
    }
  }, [selectCompanyDataList, selectChemDataList]);

  /**
   * 3.화학물질 데이터
   */
  const [chemSearchObj, setChemSearchObj] =
    useState<SearchCompanyChemWithFilterCommand>({
      page: 0,
      size: 5,
      companySeq: selectCompany ? selectCompany.companySeq! : -1,
      companyChemSearchType: "ALL",
      searchKeyWord: "",
      orderBy: "casNo",
      sort: "DESC",
    });
  const [searchTypeList2, setSearchTypeList2] = useState<commonSelectType[]>(
    []
  );

  const [selectChemData, setSelectChemData] = useState<
    "MTTRNMKOR" | "MTTRNMENG" | "CASNO" | "ALL"
  >("ALL");
  const [searchChemKeyWord, setSearchChemKeyWord] = useState<string>("");

  // 취급업체의 화학물질 데이터 Hook
  const chemQuery = useCompanyChemPage(chemSearchObj, checkSelectCompany);

  // 테이블에서 선택된 취급업체의 화학물질
  const [selectChem, setSelectChem] = useState<CompanyChemResponse | undefined>(
    undefined
  );

  // 화학물질이 선택되었는지 검사 : 사실 취급업체 아니면 굳이 필요없는데 혹시모르니..
  const [checkSelectChem, setCheckSelectChem] = useState<boolean>(false);

  /**
   * 입력내용 validation check
   */
  function validCheck() {
    if (!getValues("acdntEntNm").length) {
      setAcdntEntNmEffectiveness({
        isSuccess: false,
        msg: "사고업체를 입력해주세요.",
      });
    } else {
      setAcdntEntNmEffectiveness({
        isSuccess: true,
        msg: "",
      });
    }
    if (!getValues("entAddr").length) {
      setEntAddrEffectiveness({
        isSuccess: false,
        msg: "주소를 입력해주세요.",
      });
    } else {
      setEntAddrEffectiveness({
        isSuccess: true,
        msg: "",
      });
    }
    if (!getValues("acdntType").length) {
      setAcdntTypeEffectiveness({
        isSuccess: false,
        msg: "사고유형을 입력해주세요.",
      });
    } else {
      setAcdntTypeEffectiveness({
        isSuccess: true,
        msg: "",
      });
    }
    if (!getValues("acdntCause").length) {
      setAcdntCauseEffectiveness({
        isSuccess: false,
        msg: "사고원인을 입력해주세요.",
      });
    } else {
      setAcdntCauseEffectiveness({
        isSuccess: true,
        msg: "",
      });
    }
    if (!getValues("acdntMttr").length) {
      setAcdntMttrEffectiveness({
        isSuccess: false,
        msg: "사고물질을 입력해주세요.",
      });
    } else {
      setAcdntMttrEffectiveness({
        isSuccess: true,
        msg: "",
      });
    }
  }

  // 메인 Input헤더
  const inputHeaders: TableHeader[] = [
    {
      name: "사고일시",
      value: "acdntDt",
      width: "20%",
      essential: onlyRead == "true" ? false : true,
      accessFn: (row: any) => {
        return (
          <>
            {onlyRead == "true" ? (
              <p>{watch("acdntDt")}</p>
            ) : (
              <>
                <DateTimeInput
                  {...register("acdntDt", {
                    required: "사고일시를 입력해주세요.",
                  })}
                  labelTitle="사고일시"
                  dateSize="lg"
                  id={"acdntDt"}
                  dateSetter={(e) => {
                    setValue(
                      "acdntDt",
                      moment(e).format("YYYY-MM-DD HH:mm:ss")
                    );
                  }}
                  defaultDate={watch("acdntDt")}
                />
                <p style={{ padding: "6px 0 0 3px", color: "var(--m-blue02)" }}>
                  날짜, 시간, 분 단위를 정확히 입력해주세요.
                </p>
              </>
            )}
          </>
        );
      },
    },
    {
      name: "사고업체",
      value: "acdntEntNm",
      width: "200px",
      essential: onlyRead == "true" ? false : true,
      accessFn: (row: any) => {
        return (
          <>
            {onlyRead == "true" ? (
              <p>{watch("acdntEntNm")}</p>
            ) : (
              <div className={styles.input_box}>
                <Input
                  {...register("acdntEntNm", {
                    required: "사고업체명을 입력해주세요.",
                  })}
                  disabled
                  labelTitle="사고업체"
                  id={"acdntEntNm"}
                  value={watch("acdntEntNm")}
                  size="lg"
                  placeholder="사고업체 입력"
                  onChange={(e) => {
                    setValue("acdntEntNm", e.currentTarget.value.toString());
                  }}
                  effectivenessMsg={acdntEntNmEffectiveness}
                  fieldRightSlotElement={
                    <Dialog
                      openTriggerComponent={
                        <ChipButton
                          chipData={{
                            name: "업체 선택",
                            value: "업체 선택",
                            group: "",
                          }}
                          iconClickButtonTitle="업체 선택"
                          chipStyle="round"
                          bgColor="blue"
                          color="white"
                          borderColor="blue"
                          chipClick={() => {
                            setOpenCompany(true);
                          }}
                          ref={companyRef}
                        ></ChipButton>
                      }
                      open={openCompany}
                      setOpen={(value: SetStateAction<boolean>) => {
                        setOpenCompany(value);
                        if (companyRef && companyRef.current) {
                          companyRef.current.focus();
                        }
                      }}
                      width="60%"
                      title={"업체선택"}
                    >
                      <SearchBox>
                        <div className={styles.search_box_wrap}>
                          <span className={styles.label}>업체 검색</span>
                          <CommonSelect
                            items={searchTypeList}
                            width={"135px"}
                            placeHolder={"검색 조건"}
                            ariaLabel={"검색 조건 선택"}
                            id={"company_select_list"}
                            onValueChange={(
                              value: "TPBIZ_NM" | "COMPANY_NM" | "BIZ_NO"
                            ) => {
                              setSelectCompanyData(value);
                            }}
                            defaultValue="TPBIZ_NM"
                          ></CommonSelect>
                          <div className={styles.search_input_wrap}>
                            <Input
                              labelTitle="업체 검색"
                              size={"md"}
                              placeholder="검색어 입력"
                              id={"inDialog_company_search_input"}
                              value={searchCompanyKeyWord}
                              onChange={(e) => {
                                setSearchCompanyKeyWord(e.currentTarget.value);
                              }}
                              onKeyDown={(e) => {
                                if (e.key == "Enter") {
                                  setCompanySearchObj((prev) => {
                                    return {
                                      ...prev,
                                      page: 0,

                                      companySearchType: selectCompanyData,
                                      searchKeyWord: searchCompanyKeyWord,
                                    };
                                  });
                                }
                              }}
                            />
                          </div>
                          <div className={styles.search_btn_wrap}>
                            <Button
                              title={"업체 검색"}
                              btnColor={"black"}
                              btnSize={"md"}
                              btnStyle={"br_6"}
                              onClick={() => {
                                setCompanySearchObj((prev) => {
                                  return {
                                    ...prev,
                                    page: 0,

                                    companySearchType: selectCompanyData,
                                    searchKeyWord: searchCompanyKeyWord,
                                  };
                                });
                              }}
                            >
                              검색
                            </Button>
                          </div>
                        </div>
                      </SearchBox>

                      {/* 테이블 */}
                      <Table<CompanyResponse>
                        tableCaption="취급업체 리스트 테이블"
                        // data={[...tabelItem, ...execlTableItem]}
                        data={
                          companyQuery &&
                          companyQuery.data &&
                          companyQuery.data.content.length
                            ? companyQuery.data.content
                            : []
                        }
                        headers={header}
                        tableType={"vertical"}
                        itemTitle={"companyNm"}
                        ref={null}
                      />
                      <PagingComponent
                        onClickEvent={(num) => {
                          setCompanySearchObj((prev) => {
                            return {
                              ...prev,
                              page: num - 1,
                            };
                          });
                        }}
                        pagingData={{
                          first: companyQuery.data
                            ? companyQuery.data.first
                            : true,
                          last: companyQuery.data
                            ? companyQuery.data.last
                            : true,
                          size: companyQuery.data ? companyQuery.data.size : 10,
                          totalPages: companyQuery.data
                            ? companyQuery.data.totalPages
                            : 1,
                          totalElements: companyQuery.data
                            ? companyQuery.data.totalElements
                            : 0,
                          number: companyQuery.data
                            ? companyQuery.data.number
                            : 0,
                        }}
                      />

                      <div className={styles.bot_btn_box}>
                        <Button
                          title={"취급업체 선택 취소"}
                          btnColor={"white"}
                          btnSize={"sm"}
                          btnStyle={"br_6"}
                          style={{
                            height: "40px",
                          }}
                          onClick={() => {
                            setOpenCompany(false);
                            if (companyRef && companyRef.current) {
                              companyRef.current.focus();
                            }
                          }}
                        >
                          취소
                        </Button>
                        <Button
                          title={"취급업체 선택"}
                          btnColor={"black"}
                          btnSize={"sm"}
                          btnStyle={"br_6"}
                          style={{
                            height: "40px",
                          }}
                          onClick={() => {
                            if (selectCompany) {
                              setValue("acdntEntNm", selectCompany.companyNm);
                              setValue("entAddr", selectCompany.roadNmAddr);
                              setOpenCompany(false);
                              setCheckSelectCompany(true);

                              // 업체 선택 시, 모든 화학물질 데이터가 초기화되어야함
                              setChemSearchObj((prev) => {
                                return {
                                  ...prev,
                                  page: 0,
                                  companySeq: selectCompany.companySeq!,
                                };
                              });
                              setValue("acdntMttr", "");
                              setCheckSelectChem(false);
                              setSelectChem(undefined);
                              if (companyRef && companyRef.current) {
                                companyRef.current.focus();
                              }
                            } else {
                              setText("등록할 업체를 선택해야 합니다.");
                              setStatus("warning");
                              setIsChange(true);
                            }
                          }}
                        >
                          선택
                        </Button>
                      </div>
                    </Dialog>
                  }
                />
              </div>
            )}
          </>
        );
      },
    },
    {
      name: "주소",
      value: "entAddr",
      width: "200px",
      essential: onlyRead == "true" ? false : true,
      accessFn: (row: any) => {
        return (
          <>
            {onlyRead == "true" ? (
              <p>{watch("entAddr")}</p>
            ) : (
              <div className={styles.input_box}>
                <Input
                  {...register("entAddr", {
                    required: "주소를 입력해주세요.",
                  })}
                  disabled
                  labelTitle="주소"
                  id={"entAddr"}
                  value={watch("entAddr")}
                  size="lg"
                  placeholder="주소 입력"
                  onChange={(e) => {
                    setValue("entAddr", e.currentTarget.value.toString());
                  }}
                  effectivenessMsg={entAddrEffectiveness}
                />
              </div>
            )}
          </>
        );
      },
    },
    {
      name: "사고유형",
      value: "acdntType",
      width: "200px",
      essential: onlyRead == "true" ? false : true,
      accessFn: (row: any) => {
        return (
          <>
            {onlyRead == "true" ? (
              <p>{watch("acdntType")}</p>
            ) : (
              <div className={styles.input_box}>
                <Input
                  {...register("acdntType", {
                    required: "사고유형을 입력해주세요.",
                  })}
                  labelTitle="사고유형"
                  id={"acdntType"}
                  value={watch("acdntType")}
                  size="lg"
                  placeholder="사고유형 입력"
                  onChange={(e) => {
                    setValue("acdntType", e.currentTarget.value.toString());
                  }}
                  effectivenessMsg={acdntTypeEffectiveness}
                />
              </div>
            )}
          </>
        );
      },
    },
    {
      name: "사고원인",
      value: "acdntCause",
      width: "200px",
      essential: onlyRead == "true" ? false : true,
      accessFn: (row: any) => {
        return (
          <>
            {onlyRead == "true" ? (
              <p>{watch("acdntCause")}</p>
            ) : (
              <div className={styles.input_box}>
                <Input
                  {...register("acdntCause", {
                    required: "사고원인을 입력해주세요.",
                  })}
                  labelTitle="사고원인"
                  id={"acdntCause"}
                  value={watch("acdntCause")}
                  size="lg"
                  placeholder="사고원인 입력"
                  onChange={(e) => {
                    setValue("acdntCause", e.currentTarget.value.toString());
                  }}
                  effectivenessMsg={acdntCauseEffectiveness}
                />
              </div>
            )}
          </>
        );
      },
    },
    {
      name: "사고물질",
      value: "acdntMttr",
      width: "200px",
      essential: onlyRead == "true" ? false : true,
      accessFn: (row: any) => {
        return (
          <>
            {onlyRead == "true" ? (
              <p>{watch("acdntMttr")}</p>
            ) : (
              <div className={styles.input_box}>
                <Input
                  {...register("acdntMttr", {
                    required: "사고물질을 입력해주세요.",
                  })}
                  disabled
                  labelTitle="사고물질"
                  id={"acdntMttr"}
                  value={watch("acdntMttr")}
                  size="lg"
                  placeholder="사고물질 입력"
                  onChange={(e) => {
                    setValue("acdntMttr", e.currentTarget.value.toString());
                  }}
                  effectivenessMsg={acdntMttrEffectiveness}
                  fieldRightSlotElement={
                    <>
                      {checkSelectCompany ? (
                        <Dialog
                          openTriggerComponent={
                            <ChipButton
                              chipData={{
                                name: "물질 선택",
                                value: "물질 선택",
                                group: "",
                              }}
                              iconClickButtonTitle="화학물질 선택"
                              chipStyle="round"
                              bgColor="blue"
                              color="white"
                              borderColor="blue"
                              chipClick={() => {
                                setOpenChem(true);
                              }}
                              ref={chemRef1}
                            ></ChipButton>
                          }
                          open={openChem}
                          setOpen={(value: SetStateAction<boolean>) => {
                            setOpenChem(value);

                            if (chemRef1 && chemRef1.current) {
                              chemRef1.current.focus();
                            }
                          }}
                          width="60%"
                          title={"물질 선택"}
                        >
                          <SearchBox>
                            <div className={styles.search_box_wrap}>
                              <span className={styles.label}>
                                화학물질 검색
                              </span>
                              <CommonSelect
                                items={searchTypeList2}
                                width={"135px"}
                                placeHolder={"검색 조건"}
                                ariaLabel={"검색 조건 선택"}
                                id={"chem_select_list"}
                                onValueChange={(
                                  value:
                                    | "MTTRNMKOR"
                                    | "MTTRNMENG"
                                    | "CASNO"
                                    | "ALL"
                                ) => {
                                  setSelectChemData(value);
                                }}
                                defaultValue={selectChemData}
                              ></CommonSelect>
                              <div className={styles.search_input_wrap}>
                                <Input
                                  labelTitle="물질 검색"
                                  size={"md"}
                                  id={"inDialog_chem_search_input"}
                                  value={searchChemKeyWord}
                                  onChange={(e) => {
                                    setSearchChemKeyWord(e.currentTarget.value);
                                  }}
                                  placeholder="검색어 입력"
                                  onKeyDown={(e) => {
                                    if (e.key == "Enter") {
                                      setChemSearchObj((prev) => {
                                        return {
                                          ...prev,
                                          page: 0,
                                          companyChemSearchType: selectChemData,
                                          searchKeyWord: searchChemKeyWord,
                                        };
                                      });
                                    }
                                  }}
                                />
                              </div>
                              <div className={styles.search_btn_wrap}>
                                <Button
                                  title={"화학물질 검색"}
                                  btnColor={"black"}
                                  btnSize={"md"}
                                  btnStyle={"br_6"}
                                  onClick={() => {
                                    setChemSearchObj((prev) => {
                                      return {
                                        ...prev,
                                        page: 0,
                                        companyChemSearchType: selectChemData,
                                        searchKeyWord: searchChemKeyWord,
                                      };
                                    });
                                  }}
                                >
                                  검색
                                </Button>
                              </div>
                            </div>
                          </SearchBox>

                          {/* 테이블 */}
                          <Table<CompanyChemResponse>
                            tableCaption="취급업체 화학물질 리스트 테이블"
                            // data={[...tabelItem, ...execlTableItem]}
                            data={
                              chemQuery &&
                              chemQuery.data &&
                              chemQuery.data.content.length
                                ? chemQuery.data.content
                                : []
                            }
                            headers={header2}
                            tableType={"vertical"}
                            itemTitle={"companyChemSeq"}
                            ref={null}
                          />
                          <PagingComponent
                            onClickEvent={(num) => {
                              setChemSearchObj((prev) => {
                                return {
                                  ...prev,
                                  page: num - 1,
                                };
                              });
                            }}
                            pagingData={{
                              first: chemQuery.data
                                ? chemQuery.data.first
                                : true,
                              last: chemQuery.data ? chemQuery.data.last : true,
                              size: chemQuery.data ? chemQuery.data.size : 10,
                              totalPages: chemQuery.data
                                ? chemQuery.data.totalPages
                                : 1,
                              totalElements: chemQuery.data
                                ? chemQuery.data.totalElements
                                : 0,
                              number: chemQuery.data
                                ? chemQuery.data.number
                                : 0,
                            }}
                          />

                          <div className={styles.bot_btn_box}>
                            <Button
                              title={"화학물질 선택 취소"}
                              btnColor={"white"}
                              btnSize={"sm"}
                              btnStyle={"br_6"}
                              style={{
                                height: "40px",
                              }}
                              onClick={() => {
                                setOpenChem(false);
                                if (chemRef1 && chemRef1.current) {
                                  chemRef1.current.focus();
                                }
                              }}
                            >
                              취소
                            </Button>
                            <Button
                              title={"화학물질 선택"}
                              btnColor={"black"}
                              btnSize={"sm"}
                              btnStyle={"br_6"}
                              style={{
                                height: "40px",
                              }}
                              onClick={() => {
                                if (selectChem) {
                                  setValue(
                                    "acdntMttr",
                                    `${selectChem.chemResponse.mttrnmeng}${
                                      selectChem.chemResponse.mttrnmkor
                                        ? `(${selectChem.chemResponse.mttrnmkor})`
                                        : ""
                                    }`
                                  );
                                  setOpenChem(false);
                                  setCheckSelectChem(true);
                                  if (chemRef1 && chemRef1.current) {
                                    chemRef1.current.focus();
                                  }
                                } else {
                                  setText("등록할 화학물질을 선택해야 합니다.");
                                  setStatus("warning");
                                  setIsChange(true);
                                }
                              }}
                            >
                              선택
                            </Button>
                          </div>
                        </Dialog>
                      ) : (
                        <ChipButton
                          chipData={{
                            name: "물질 선택",
                            value: "물질 선택",
                            group: "",
                          }}
                          iconClickButtonTitle="물질 선택"
                          chipStyle="round"
                          bgColor="blue"
                          color="white"
                          borderColor="blue"
                          chipClick={() => {
                            setIsChange(true);
                            setText("사고업체를 먼저 선택해주세요.");
                            setStatus("warning");
                          }}
                        ></ChipButton>
                      )}
                    </>
                  }
                />
              </div>
            )}
          </>
        );
      },
    },
    {
      name: "누출량",
      value: "lkgSz",
      width: "200px",
      accessFn: (row: any) => {
        return (
          <>
            {onlyRead == "true" ? (
              <p>{watch("lkgSz") || ""}</p>
            ) : (
              <div className={styles.input_box}>
                <Input
                  {...register("lkgSz")}
                  labelTitle="누출량"
                  id={"lkgSz"}
                  value={watch("lkgSz") || ""}
                  size="lg"
                  placeholder="누출량 입력"
                  onChange={(e) => {
                    setValue("lkgSz", e.currentTarget.value.toString());
                  }}
                />
              </div>
            )}
          </>
        );
      },
    },
    {
      name: "발생장소",
      value: "acdntPlc",
      width: "200px",
      accessFn: (row: any) => {
        return (
          <>
            {onlyRead == "true" ? (
              <p>{watch("acdntPlc") || ""}</p>
            ) : (
              <div className={styles.input_box}>
                <Input
                  {...register("acdntPlc")}
                  labelTitle="발생장소"
                  id={"acdntPlc"}
                  value={watch("acdntPlc") || ""}
                  size="lg"
                  placeholder="발생장소 입력"
                  onChange={(e) => {
                    setValue("acdntPlc", e.currentTarget.value.toString());
                  }}
                />
              </div>
            )}
          </>
        );
      },
    },
    {
      name: "사고개요",
      value: "acdntCn",
      width: "200px",
      accessFn: (row: any) => {
        return (
          <>
            {onlyRead == "true" ? (
              <pre
                style={{
                  maxWidth: "1050px",
                  whiteSpace: "pre-wrap",
                  wordWrap: "break-word",
                }}
              >
                {watch("acdntCn") || ""}
              </pre>
            ) : (
              <div className={styles.input_box}>
                <TextArea
                  defaultHeight="200px"
                  {...register("acdntCn")}
                  labelTitle="사고개요"
                  id={"acdntCn"}
                  value={watch("acdntCn") || ""}
                  placeholder="사고개요 입력"
                  onChange={(e) => {
                    setValue("acdntCn", e.currentTarget.value.toString());
                  }}
                />
              </div>
            )}
          </>
        );
      },
    },
  ];

  // 취급업체 출력 헤더
  const header: TableHeader[] = [
    {
      name: "선택",
      value: "companySeq",
      width: "5%",
      accessFn: (item: CompanyResponse, idx: number) => {
        return (
          <div className={styles.table_check_box}>
            <CommonCheckBox
              title={`${
                item.companySeq &&
                selectCompany &&
                selectCompany.companySeq &&
                selectCompany.companySeq === item.companySeq
                  ? `${item.companyNm}요소 체크됨`
                  : `${item.companyNm}요소 체크안됨`
              }`}
              id={
                item.companySeq
                  ? item.companySeq.toString()
                  : item.rowId.toString()
              }
              checked={
                item.companySeq &&
                selectCompany &&
                selectCompany.companySeq &&
                selectCompany.companySeq === item.companySeq
                  ? true
                  : false
              }
              onCheckedChange={(e: boolean) => {
                if (e === true) {
                  setSelectCompany(item);
                } else {
                  setSelectCompany(undefined);
                }
              }}
            />
          </div>
        );
      },
    },
    {
      name: "업체명",
      value: "companyNm",
      width: "15%",
    },
    {
      name: "업종",
      value: "tpbizNm",
      width: "10%",
    },
    {
      name: "주소",
      value: "roadNmAddr",
      width: "40%",
    },
    {
      name: "연락처",
      value: "telNo",
      width: "15%",
      accessFn: (row: CompanyResponse) => {
        return (
          <span className={styles.table_td}>
            {row.telNo
              ? row.telNo
                  .replace(/[^0-9]/g, "")
                  .replace(/^(\d{2,3})(\d{3,4})(\d{4})$/, `$1-$2-$3`)
              : ""}
          </span>
        );
      },
    },

    {
      name: "연간취급량",
      value: "yearTrtmntSz",
      width: "15%",
    },
  ];

  // 화학물질 출력 헤더
  const header2: TableHeader[] = [
    {
      name: "선택",
      value: "companyChemSeq",
      width: "5%",
      accessFn: (item: CompanyChemResponse, idx: number) => {
        return (
          <div className={styles.table_check_box}>
            <CommonCheckBox
              title={`${
                item.companyChemSeq &&
                selectChem &&
                selectChem.companyChemSeq &&
                selectChem.companyChemSeq === item.companyChemSeq
                  ? `${item.chemResponse.mttrnmeng}요소 체크됨`
                  : `${item.chemResponse.mttrnmeng}요소 체크안됨`
              }`}
              id={
                item.companyChemSeq
                  ? item.companyChemSeq.toString()
                  : item.rowId.toString()
              }
              checked={
                item.companyChemSeq &&
                selectChem &&
                selectChem.companyChemSeq &&
                selectChem.companyChemSeq === item.companyChemSeq
                  ? true
                  : false
              }
              onCheckedChange={(e: boolean) => {
                if (e === true) {
                  setSelectChem(item);
                } else {
                  setSelectChem(undefined);
                }
              }}
            />
          </div>
        );
      },
    },

    {
      name: "화학물질명(국문)",
      value: "chemResponse.mttrnmkor",
      width: "32.5%",
      align: "left",
      accessFn: (item: CompanyChemResponse, idx: number) => {
        return (
          <span className={styles.table_td}>
            {item.chemResponse.mttrnmkor || ""}
          </span>
        );
      },
    },
    {
      name: "화학물질명(영문)",
      value: "chemResponse.mttrnmeng",
      width: "32.5%",
      align: "left",
      accessFn: (item: CompanyChemResponse, idx: number) => {
        return (
          <span className={styles.table_td}>{item.chemResponse.mttrnmeng}</span>
        );
      },
    },
    {
      name: "CAS 번호",
      value: "casNo",
      width: "30%",
    },
  ];

  useEffect(() => {
    if (modi && data) {
      const formattedAcdntYmd = moment(data.acdntDt, "YYYY-MM-DD HH:mm").format(
        "YYYY-MM-DD HH:mm:ss"
      );

      setValue("acdntDt", formattedAcdntYmd);
      setValue("acdntCn", data.acdntCn || "");
      setValue("acdntEntNm", data.acdntEntNm || "");
      setValue("entAddr", data.entAddr || "");
      setValue("acdntType", data.acdntType || "");
      setValue("acdntCause", data.acdntCause || "");
      setValue("acdntMttr", data.acdntMttr || "");
      setValue("lkgSz", data.lkgSz || "");
      setValue("acdntPlc", data.acdntPlc || "");

      /**
       * 화학물질 선택을 위한 세팅필요
       *
       * 1. 화학물질 검색 obj 설정
       * 2. 취급업체 선택 상태값을 true로 설정 : setCheckSelectCompany(true)
       * 3. 화학물질도 기존에 입력된 게 있으면, 화학물질 선택 상태값도 true로 설정 : setCheckSelectChem(true);
       */

      setChemSearchObj((prev) => {
        return {
          ...prev,
          companySeq: data.companySeq!,
        };
      });

      setCheckSelectCompany(true);
      setCheckSelectChem(true);
    } else {
    }
  }, []);

  return (
    <>
      <Table<RegisterAcdntInfoCommand>
        tableCaption="사고대응정보 등록"
        data={[getValues()]}
        headers={inputHeaders}
        tableType={"horizontal"}
        itemTitle={"acdntEntNm"}
        ref={null}
      />
      {onlyRead != "true" ? (
        <p className={styles.desc_txt}>
          ※ 필수항목을 모두 입력하셔야 저장이 가능합니다.
        </p>
      ) : (
        <></>
      )}
      {/* 저장/취소 */}
      <div className={`${styles.bot_btn_box}`}>
        {onlyRead == "true" ? (
          <>
            <Button
              title="목록"
              btnColor="black"
              btnSize="md"
              btnStyle="br_6"
              onClick={() => {
                router.back();
                router.refresh();
              }}
            >
              목록
            </Button>
          </>
        ) : (
          <>
            <Button
              title="취소"
              btnColor="white"
              btnSize="md"
              btnStyle="br_6"
              onClick={() => {
                router.back();
                router.refresh();
              }}
            >
              취소
            </Button>
            <Button
              title="저장"
              btnColor="black"
              btnSize="md"
              btnStyle="br_6"
              onClick={async () => {
                const result = await trigger(
                  [
                    "acdntDt",
                    "acdntEntNm",
                    "entAddr",
                    "acdntType",
                    "acdntCause",
                    "acdntMttr",
                  ],
                  {
                    shouldFocus: true,
                  }
                );
                validCheck();

                if (!result) {
                  return;
                } else {
                  const inputData = getValues();

                  if (modi && data) {
                    // 수정단계

                    const postData = {
                      ...inputData,
                      acdntInfoSeq: data.acdntInfoSeq,
                      acdntDt: moment(inputData.acdntDt).format("YYYYMMDDHHmm"),
                      companySeq: selectCompany
                        ? selectCompany.companySeq
                        : data.companySeq,
                      chemSeq: selectChem
                        ? selectChem.companyChemSeq
                        : data.chemSeq,
                    };

                    fetch("/api/accident/modifyAcdntInfo", {
                      method: "POST",
                      body: JSON.stringify(postData),
                    })
                      .then((res) => res.json())
                      .then((result) => {
                        if (result.code == "OK") {
                          setStatus("success");
                          setText("수정되었습니다.");
                          setIsChange(true);
                          setTimeout(() => {
                            router.push("/Ca/CrisisResponse");
                            router.refresh();
                          }, 600);
                          return;
                        } else {
                          setStatus("error");
                          setText(
                            `수정 과정에서 오류가 발생했습니다. ${
                              result.description || result.msg || ""
                            }`
                          );
                          setIsChange(true);
                          return;
                        }
                      })
                      .catch((err) => {
                        setStatus("error");
                        setText("수정 과정에서 오류가 발생했습니다.");
                        setIsChange(true);
                        return;
                      });
                  } else {
                    // 등록단계
                    const postData = {
                      ...inputData,
                      acdntDt: moment(inputData.acdntDt).format("YYYYMMDDHHmm"),
                      companySeq: selectCompany!.companySeq,
                      chemSeq: selectChem!.companyChemSeq,
                      delYn: "N",
                    };

                    fetch("/api/accident/registerAcdntInfo", {
                      method: "POST",
                      body: JSON.stringify(postData),
                    })
                      .then((res) => res.json())
                      .then((result) => {
                        if (result.code == 200) {
                          setStatus("success");
                          setText("저장되었습니다.");
                          setIsChange(true);
                          setTimeout(() => {
                            router.push("/Ca/CrisisResponse");
                            router.refresh();
                          }, 600);
                          return;
                        } else {
                          setStatus("error");
                          setText(
                            `등록 과정에서 오류가 발생했습니다. ${
                              result.description || result.msg || ""
                            }`
                          );
                          setIsChange(true);
                          return;
                        }
                      })
                      .catch((err) => {
                        setStatus("error");
                        setText("저장 과정에서 오류가 발생했습니다.");
                        setIsChange(true);
                        return;
                      });
                  }
                }
              }}
            >
              저장
            </Button>
          </>
        )}
      </div>
    </>
  );
}

```