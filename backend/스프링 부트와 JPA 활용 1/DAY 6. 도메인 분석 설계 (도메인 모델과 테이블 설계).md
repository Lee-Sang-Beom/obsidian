
#### 1. 도메인 모델과 테이블 설계 다이어그램

![[UML 다이어그램 (관계).png]]

#### 2. 관계 설정 및 설명

###### ※ 회원, 주문, 상품의 관계
- 회원은 여러 상품을 주문할 수 있다. (회원과 주문은 1:N 관계)
- 주문 1개에 대하여, 배송이 1개 이루어진다. (주문과 배송은 1:1 관계)
- 회원이 한 번 주문할 때, 여러 개의 상품을 주문할 수 있다. 
	 - 그리고 상품은 여러 주문에 포함될 수 있다.
	 - 따라서, 주문과 상품은 다대다 관계(N:N)이다.
	 - 하지만, 다대다 관계는 관계형 데이터베이스는 물론이고, Entity에서도 거의 사용하지 않는다. 그래서 여기서는, 주문상품이라는 Entity를 추가하여 **다대다 관계를 일대다 관계와 다대일 관계로 풀어냈다.**

###### ※ 상품 분류
- 상품은 도서, 음반, 영화로 구분된다.
- 이들은 **상품**이라는 공통 속성을 사용하므로, 상속 구조로 표현했다.


#### 3. 회원 엔티티 분석 클래스 다이어그램
![[회원 엔티티 분석.png]]

###### ※ 회원
- 이름과 임베디드 타입인 주소, 주문 리스트를 가진다.
###### ※ 주문
- 한 번 주문시 여러 상품을 주문할 수 있으므로 주문과 주문상품( `OrderItem` )은 일대다 관계다. 
- 주문은 상품을 주문한 회원과 배송 정보, 주문 날짜, 주문 상태( `status` )를 가지고 있다. 주문 상태는 열거형을 사용했는데 주문( `ORDER` ), 취소( `CANCEL` )을 표현할 수 있다
###### ※ 주문 상품
- 주문한 상품 정보와 주문 금액( `orderPrice` ), 주문 수량( `count` ) 정보를 가지고 있다. 
	- 보통 `OrderLine` , `LineItem` 으로 많이 표현한다.
###### ※ 상품
- 이름과 임베디드 타입인 주소, 주문 리스트를 가진다.

###### ※ 배송
- 이름과 임베디드 타입인 주소, 주문 리스트를 가진다.
###### ※ 카테고리
- 이름과 임베디드 타입인 주소, 주문 리스트를 가진다.
###### ※ 주소
- 이름과 임베디드 타입인 주소, 주문 리스트를 가진다.