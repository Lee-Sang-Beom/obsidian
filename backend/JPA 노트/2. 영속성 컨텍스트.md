
#### 1. 엔티티 매니저 팩토리(Entity Manager Factory)와 Entity Manager(엔티티 매니저)

- 웹 어플리케이션을 개발한다고 할 때, 대체적으로 아래의 흐름이 존재한다.
	1. 엔티티 매니저 팩토리를 통해, 고객 요청이 올때마다 엔티티 매니저를 생성한다.
	2. 엔티티 매니저는 내부적으로 데이터 베이스 Connection을 사용하여, DB를 사용하게 된다.

![[엔티티 매니저 팩토리와 엔티티 매니저.png]]


#### 2. 영속성 컨텍스트

- 엔티티를 영구 저장하는 환경이라는 의미이다.
	- `EntityManager.persist(entity);` 
	- 위의 코드는 entity를 DB에 저장한다는 의미가 아니라, 영속성 컨텍스트라는 곳에 저장한다는 뜻이다.

- 영속성 컨텍스트는 논리적인 개념이며, 엔티티 매니저를 통해 영속성 컨텍스트에 접근한다.

![[엔티티 매니저와 영속성 컨텍스트의 관계.png]]
- 위 이미지를 살펴보자.
	- 위 이미지는 엔티티 매니저가 생성될 때, **내부적으로 1:1로 엔티티 매니저 안에 영속성 컨텍스트가 생성된다는 것을 보여주고 있다.**
	- 아래 내용은 스프링 프레임워크일 때의 내용인데 일단 넘어가자.


#### 3. 엔티티 생명주기

- 비영속 (new/transient)
	- 영속성 컨텍스트와 전혀 관계가 없는 **"새로운 상태"**
	
- 영속 (managed)
	- 영속성 컨텍스트에 **"관리"** 되는 상태
	
- 준영속 (detached)


- 삭제 (removed)