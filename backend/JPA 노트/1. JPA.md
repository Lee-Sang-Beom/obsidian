
#### 1. JPA의 정의

- JPA(Java Persistence API)는, Java 언어를 사용하여 관계형 데이터베이스를 다루는 데 사용되는 자바 표준 ORM(Object-Relational Mapping) 기술이다.
	- ORM은 객체 지향 프로그래밍 언어에서, **객체와 관계형 데이터베이스의 테이블 간의 매핑을 자동화하는 기술**을 의미한다. 
	- 개발자는 객체 지향적인 방식으로 데이터를 다루고, ORM 프레임워크가 이를 관계형 데이터베이스에 맞게 변환하여 데이터베이스와의 상호작용을 수행할 수 있다.

- JPA는 이러한 ORM 기술을 자바에서 사용할 수 있도록 표준화한 API이다.
	- JPA를 사용하면 **개발자는 데이터베이스와의 상호작용을 위해 SQL 쿼리를 직접 작성하는 대신, 객체를 사용하여 데이터를 조회, 저장, 수정 및 삭제**할 수 있다.
	- 즉, SQL과 데이터 중심 설계에서, 객체 중심의 설계로 패러다임을 전환할 수 있도록 한다.
	- 이는 개발 생산성을 향상시키고, 코드의 가독성을 높이며, 데이터베이스에 대한 의존성을 줄이는 데 도움이 된다.

- JPA는 주로 Java EE(Enterprise Edition) 및 Java SE(Standard Edition) 애플리케이션에서 사용되며, 대표적인 JPA 구현체로는 Hibernate, EclipseLink, OpenJPA 등이 있다.
	- 이러한 JPA 구현체들은 JPA 표준을 구현하면서 각각의 특징과 성능을 제공한다.


#### 2. 왜 사용해야하나?

- SQL 중심적인 개발에서 객체 중심으로 개발
- 생산성
- 유지보수
- 패러다임의 불일치 해결
- 성능
- 표준


#### 3. 생산성 (JPA와 CRUD)

- 트랜잭션 안에서 데이터를 조회하고 변경해주면, 트랜잭션이 끝나는 시점에 자동으로 업데이트 쿼리가 DB로 나가고, DB에 커밋된다.

- 저장: `jpa.persist(member);`
- 조회: `Member member = jpa.find(memberId);`
- 수정:` member.setName("변경할 member 이름");`
- 삭제: `JPA.remove(member);`

![[사용 이미지/backend/JPA 노트/1. JPA/JPA 노트 1 - find 예시.png]]


#### 4. 비교
![[JPA 노트 1 - 비교.png]]


#### 5. 성능

###### ※ 1차 캐시와 동일성 보장
- 같은 트랜잭션 내에서, 이전 결과를 메모리 상에서 가져오는 캐시를 사용한다. 
![[JPA 노트 1 - 캐시.png]]
###### ※ 지연 로딩과 즉시 로딩

- 상황에 따라 데이터를 언제 로드하느냐가 다를 수 있다.
	- JPA는 이를 위해, 지연 로딩 전략과 즉시 로딩 전략을 제공하고 있다.

- 지연 로딩 : 객체가 실제 사용될 때 로딩 
	- `team.getName()` 문이 수행될 때가 되어서야, 실제 team 데이터를 가져와서 값을 채워준다.

- 즉시 로딩 : JOIN SQL로 한번에 연관된 객체까지 미리 조회
	- member를 조회하는 순간, 팀도 같이 조회한다.

![[JPA 노트 1 - 지연 로딩과 즉시 로딩.png]]


#### 6. JPQL

- 검색 쿼리와 같은 검색 과정에서, 테이블이 아닌 **Entity 객체를 대상으로 검색할 수 있도록 하는 문법**이 있다.
	- JPA는 SQL을 추상화한 JPQL이라는 객체 지향 쿼리 언어를 제공한다.
	
- JPQL은 엔티티 객체를 대상으로 쿼리
- SQL은 데이터베이스 테이블을 대상으로 쿼리