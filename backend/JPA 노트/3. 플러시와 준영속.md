
#### 1. 플러시

- 간단히 말해, **영속성 컨텍스트의 변경내용을 데이터베이스에 반영하는 것**이다.

###### ※ 플러시 발생
- 데이터베이스 트랜잭션이 커밋될 때
- 수정된 엔티티에 대한 쓰기 지연 SQL 저장소에 등록될 때 (변경감지)
- 쓰기 지연 SQL 저장소의 쿼리를 데이터베이스에 전송할 때 (쓰기지연)

###### ※ 플러시 호출
- `em.flush`: 직접 호출하여, 즉시 쿼리를 DB에 반영
- 트랜잭션 커밋, JPQL 쿼리 실행: 플러스가 자동으로 호출됨


#### 2. JPQL 쿼리 실행과 플러시

- JPQL 쿼리 실행 시, 플러시는 자동으로 호출된다.
```java
em.persist(memberA);
em.persist(memberB);
em.persist(memberC);

// 중간에 JPQL 실행
// em.persist() 후에는 데이터베이스에 아직 반영되지 않았다.
// 근데, 여기서는 바로 select로 Member 테이블에서 데이터를 가져오려고 한다.
// 따라서 JPQL를 실행할 때, 앞선 변경사항을 DB에 반영해야 원하는 동작이 발생하기 때문에, 자동으로 DB에 변경사항을 반영하도록 플러시를 호출한다.
query = em.createQuery("select m from Member m", Member.class);
List<Member> members = query.getResultList();
```