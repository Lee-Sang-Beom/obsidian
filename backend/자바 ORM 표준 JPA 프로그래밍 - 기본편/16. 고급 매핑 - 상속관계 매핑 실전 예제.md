
#### 1. 요구사항 추가

- 상품의 종류는 음반, 도서, 영화가 있고 이후 더 확장될 수 있다.
- 모든 데이터는 등록일과 수정일이 필수이다.


#### 2. 도메인 모델

- **Item**을 상속받는 Album, Book, Movie가 추가되었다.
![[도메인 모델.png]]
![[도메인 모델 상세.png]]

#### 3. 테이블 설계

- **ITEM** 테이블은 **단일 테이블 전략**을 사용하여 설계되었다.
	- 만약, DTYPE="ALBUM"이라면,  `artist, etc, author, isbn, director, actor` 컬럼은 NULL을 허용하는 필드여야 하며, `author, isbn, director, actor`에는  NULL이 들어갈 것이다.

![[테이블 설계.png]]


#### 4. 코드 작성

> `Item.java`
```java
@Entity
@Inheritance(strategy = InheritanceType.SIGNLE_TABLE) // 상속하는 추상클래스라고 정의 -> 단일 테이블 전략
@DiscriminatorColumn(name="DTYPE")  // 이거 적어주면 DTYPE 생성 (기본이 DTYPE이라 name 속성은 안적어도됨)
public abstract class Item{
	@Id @GeneratedVazlue
	private Long id;
	
	private String name;
	private int price;
}
```

> `Album.java`
```java
@Entity
@DiscriminatorValue("Album") 
public class Album extends Item{
	public String artist;
	public String etc;

	public String getArtist(){ return artist; }
	public String setArtist(String artist){ this.artist = artist; }
	public String getEtc(){ return etc; }
	public String setEtc(String etc){ this.etc = etc; }
}
```

> `Book.java`
```java
@Entity
@DiscriminatorValue("Book")
public class Book extends Item{
	public String author;
	public String isbn;
	
	public String getAuthor(){ return author; }
	public String setAuthor(String author){ this.author = author; }
	public String getIsbn(){ return isbn; }
	public String setIsbn(String isbn){ this.isbn = isbn; }
}
```

> `Movie.java`
```java
@Entity
@DiscriminatorValue("Movie") 
public class Movie extends Item{
	public String director;
	public String actor;
	
	public String getDirector(){ return director; }
	public String setDirector(String director){ this.director = director; }
	public String getActor(){ return actor; }
	public String setActor(String actor){ this.actor = actor; }
	
```

