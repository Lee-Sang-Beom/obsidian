
#### 1. 양방향 매핑

![[양방향 매핑 연관관계.png]]
- 다음과 같은 연관관계를 구현해야 한다고 하자.
	- 기존에는 `member.getTeam()`과 같이, member 객체에서 team 정보를 구할 수 있었다.
	- 하지만 `team.getMember()`는 불가능하다.

- 이를 가능하도록 하기 위해서는 **양방향 연관관계**라는 것을 만들어주어야 한다.
	- 위 이미지에서, **[테이블 연관관계]** 는 하나도 바뀌는 게 없다.
	- 하지만, **[양방향 객체 연관관계]** 측에서, Team 객체에 `List members`가 추가되었다.
		- Team에서 Member에 접근할 수 있도록 한 것이다.

###### ※ 양방향 매핑 (Member 엔티티는 단방향과 동일)
```java
@Entity
public class Member{
	@Id @GeneratedValue
	private Long id;

	@Column(name="USERNAME")
	private String name;
	private int age;

	@ManyToOne
	@JoinColumn(name="TEAM_ID")
	private Team team;

	// ...
}
```

###### ※ 양방향 매핑 (Team 엔티티는 컬렉션 추가)
```java
@Entity
public class Member{
	@Id @GeneratedValue
	private Long id;
	private String name;

	@OneToMany(mappedBy = "team")
	List<Member> members = new ArrayList<Member>();

	// ...
}
```
- Member와 Team의 관계를 생각해보면, Team이 여러 Member를 가질 수 있기 때문에, Member와 Team은 다대일 관계였다.
	- 그래서, Team을 기준으로 보았을 때는 Team과 Member는 일대다 관계이다.
	- 따라서, `@OneToMany`

###### ※  양방향 매핑 (반대방향으로 객체 그래프 탐색)
```java
// 조회
Team findTeam = em.find(Team.class, team.getId());
int memberSize = findTeam.getMembers().size();
```