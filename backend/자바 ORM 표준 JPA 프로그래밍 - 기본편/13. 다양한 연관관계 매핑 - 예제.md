
#### 1. 배송, 카테고리 추가 - 엔티티

- 주문과 배송은 1:1 관계 (`@OneToMany`)
- 상품과 카테고리는 N:M 관계 (`@ManyToMany`)
![[배송과 카테고리 추가(엔티티).png]]

#### 2. 배송, 카테고리 추가 - ERD(Entity Relationship Diagram)

- **_ERD_**: 시스템의 엔티티들이 무엇이 있는지와 어떤 관계가 있는지를 나타내는 다이어그램

- 주문과 배송은 1:1 관계이다. 여기서는, 외래키를 주테이블인 **ORDER**에 넣기로 했다.
	- `주문 당 배송이 1개이다.`

- 카테고리와 아이템은 다대다 관계이다. 연결테이블인 **CATEGORY_ITEM**을 만들었다.
	- `하나의 상품은 여러 개의 카테고리에 소속될 수 있으며, 하나의 카테고리는 여러 상품이 가질 수 있다.`
![[배송과 카테고리 추가(ERD).png]]


#### 3. 배송, 카테고리 추가 - 엔티티 상세

- 엔티티의 핵심 변화(외래키 관련)는 아래와 같다.
	- **ORDER**: `Delivery delivery` 추가
	- **Delivery**: `Order order` 추가
	- **ITEM**: `List categories` 추가
	- **Category**: `List items` 추가

- ORDER와 Delivery는 일대일 관계이며, Item과 Category는 다대다 관계이다.
	- 객체는 컬렉션으로 다대다로 구현이 가능하기 때문에, 연결 테이블 같은 것이 필요 없는 것이다.

![[배송과 카테고리 추가(엔티티 상세).png]]


#### 4. 코드

> `Order.java`
```java
@Entity
@Table(name="ORDERS")
public class Order {
 @Id @GeneratedValue
 @JoinColumn(name="ORDER_ID")
 private Long id;
 
 @ManyToOne
 @JoinColumn(name="MEMBER_ID")
 private Member nmember;
 
 // 다대다로 인한 연결테이블과 매핑
 @OneToMany(mappedBy="order")
}

```