
#### 1. 다대다(N:M) 관계

- 관계형 데이터베이스는 정규화된 테이블 2개로 다대다 관계를 표현할 수 없다.
- 연결 테이블을 추가하여, 일대다(1:N), 다대일(N:M) 관계로 풀어내야 한다.
	- **회원은 여러 상품을 선택할 수 있고, 상품은 여러 회원을 가질 수 있다는 것이 예시**이다.
![[다대다 관계 - 관계형 DB는 정규화된 테이블로 다대다 관계 구현 불가.png]]

- 반면, 객체는 컬렉션을 사용하여 **객체 2개로 다대다 관계**를 만들 수 있다.
	- Member는 여러 Product를 가진다.
	- Product는 여러 Member를 가진다.
	- 이를 **컬렉션**으로 가능하게 할 수 있다.

- 그럼, 객체는 다대다 관계가 되는데, 테이블도 되게 만들어줘야 하지 않을까?
	- 그래서 **연결 테이블**이라는 것을 사용한다.
![[다대다 관계 - 객체는 컬렉션을 사용해서 객체 2개로 다대다 관계 가능.png]]


#### 2. 다대다 매핑

- `@ManyToMany`를 사용한다.
- `@JoinTable`로 연결 테이블을 지정한다.
- 다대다 매핑도 단방향, 양방향이 가능하다.


#### 3. 예시

> Product.java


#### 4. 다대다 매핑의 한계와 극복

###### ※ 한계
- 실무에서 사용하지 않는다.
- 연결 테이블이 단순히 연결만 하고 끝나지 않는다.
	- 주문시간, 수량과 같은 데이터가 들어올 수 있다.
![[다대다 매핑의 한계.png]]

###### ※ 극복
- 연결 테이블용 엔티티 추가 (연결 테이블을 엔티티로 승격)
- `@ManyToMany` -> `@OneToMany`, `@ManyToOne`
![[다대다 매핑의 한계극복.png]]