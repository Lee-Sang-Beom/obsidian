
#### Day Planner
---
- [ ] 하루 1회 프론트엔드 지식 및 Next.js 관련 기술 정리하기


#### Work
---
- [ ] prerender 결과로 나온 빌드 preview 빈 화면만 나오는 이유 분석해야함
- [ ] react 테스트 도구 조사
- [ ] 마지막 동작 확인

#### ETC
---
- [ ] 임시저장: `vite.config.ts`
```ts
import path from 'path'  
import tailwindcss from '@tailwindcss/vite'  
import { defineConfig } from 'vite'  
import react from '@vitejs/plugin-react'  
import { TanStackRouterVite } from '@tanstack/router-plugin/vite'  
import prerender from '@prerenderer/rollup-plugin'  
  
export default defineConfig({  
  plugins: [  
    TanStackRouterVite(),  
    react(),  
    tailwindcss(),  
    prerender({  
      routes: ['/', '/users', '/users/create'], // 미리 렌더링할 경로 리스트  
      renderer: '@prerenderer/renderer-puppeteer', // 렌더링에 사용할 툴(여기서는 Puppeteer)      server: {  
        port: 4173, // 로컬 서버가 실행될 포트  
        host: 'localhost', // 서버 호스트 (여기서는 로컬 환경)  
      },  
      rendererOptions: {  
        maxConcurrentRoutes: 1, // 동시에 렌더링할 수 있는 경로의 최대 수  
        renderAfterTime: 500, // 페이지가 렌더링될 때까지 기다릴 시간 (밀리초 단위)  
      },  
    }),  
  ],  
  resolve: {  
    alias: {  
      '@': path.resolve(__dirname, './src'),  
    },  
  },  
})  
  
/**  
 * @name postProcess  
 * @description  
 * 이 함수는 렌더링된 페이지의 HTML을 후처리하는 역할을 합니다.  
 * 주로 HTTP 프로토콜을 HTTPS로 변경하고, 로컬 환경에서 사용되는  
 * localhost나 127.0.0.1 주소를 실제 배포된 도메인 주소로 교체하는 작업을 합니다.  
 * * - HTTP를 HTTPS로 변경하여 보안 프로토콜을 강제합니다.  
 * - 로컬 서버(localhost 또는 127.0.0.1) 주소를 배포된 서버 도메인 주소(https://seo-optimization-test.netlify.app/)로 변경합니다.  
 * * @param {Object} renderedRoute - 렌더링된 페이지의 HTML을 포함한 객체입니다.  
 * @param {string} renderedRoute.html - 수정해야 할 HTML 콘텐츠입니다.  
 * @returns {void} - 이 함수는 HTML을 수정한 후 반환하지 않으며, 수정된 HTML을 그대로 유지합니다.  
 */// postProcess(renderedRoute) {  
//   renderedRoute.html = renderedRoute.html  
//     .replace(/http:/i, 'https:')  // HTTP를 HTTPS로 변경  
//     .replace(/(https:\/\/)?(localhost|127\.0\.0\.1):\d*/i, 'https://seo-optimization-test.netlify.app/')  // 로컬 주소를 배포 도메인으로 변경  
// }
```

```
ssr({  
  prerender: true,  
  hooks: {  
    'prerender:routes': async (routes: Set<string>) => {  
      // Set<string>으로 타입 지정  
      const apiUrl = process.env.VITE_API_URL || 'https://dummyjson.com'  
      console.log('apiUrl ', apiUrl)  
  
      // 사전 렌더링할 경로를 추가  
      routes.add('/')  
      routes.add('/users')  
      routes.add('/users/create')  
  
      // 동적으로 경로를 추가할 수 있음 (예: 게시글 목록)  
      const usersRes: UserResponse = await fetch(apiUrl + '/users')  
        .then(res => res.json())  
        .then((data: unknown) => data as UserResponse) // 타입 강제 변환  
  
      const userList: User[] = usersRes.users  
  
      // 각 게시글 경로를 routes에 추가  
      userList.forEach(user => {  
        routes.add(`/users/${user.id}`)  
      })  
    },  
  },  
}),
```