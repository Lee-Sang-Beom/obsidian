
#### Day Planner
---
- [ ] 하루 1회 프론트엔드 지식 및 Next.js 관련 기술 정리하기


#### Work
---
- [ ] 일레븐랩스를 베이직 엔진으로 이름 변경하고 UI에서 기존 엔진나오는 부분 일단 주석처리 진행


#### 일레븐랩스 분석
---
- [ ] 날짜정보를 숫자로 변경해도 문제없이 잘 읽음
- [ ] 전화번호 하이픈은 여전히 있으면 안됨


#### 주간보고 내용 정리
---
- 업무내용: AI TTS 프로젝트 프론트엔드 리팩토링, 수치 테스트, 추가 필요기능 개발
```plaintext

1. 주간회의 참여

2. 음성생성 영역 확장형 모델에 대한 default values 조정 및 bottom 영역 css 수정하여 develop push

3. 기능추가 (refactor/audio)
 - 백엔드 개발 완료로 인한 AudioRequest interface에 bgmCode, apiType property 추가
 - 주석처리해제 및 선택값 post될 수 있도록 수정: 배경음, 엔진 선택영역

4. 리팩토링 (refactor/audio)
- 1. 우선적인 리팩토링 요소 탐색: audio index 필요없는 코드제거 및 리팩토링
- 2. 우선적인 리팩토링 요소 탐색: generateVoice 컴포넌트에서 하나로 몰려있던 dialog 코드들을 분리 (컨테이너 컴포넌트와 표현 컴포넌트 흐름을 기반으로 동작할 수 있도록 구현)

===

1. 배경음 선택에 따라 변하는 파일 확장자에 대한 오디오 재생/다운로드/확장자 출력 등에 대한 능동적인 처리로직 구성 

2. 오디오 페이지 음성생성 영역 컴포넌트(generate-voice.tsx) 리팩토링 진행
- 내부에서 한번에 사용되던 다이얼로그 코드 분리 마무리작업
- 너무 많이 관리되는 string 개별 상태값을 성격에 따라 object 형태로 묶음 처리할 수 있도록 구현
- 일부 함수(화자/배경음 재생/중지 등에 대한 함수들) 공통화
- 엔진 선택영역 주석화
	  
3. 화자/업종별 멘트 주입 
4. 화자 선택후 후속작업으로 화자별 값을 세팅할 수 있는 준비코드 생성 (값은 따로 생성해야함)

===

1. 멘트 재생 테스트 및 TTS가 잘 읽을 수 있는 문장 조사 및 그에 따른 조정 진행

(1) 테스트환경
- 말하기 속도 170, 확장형 모델, 주파수 22050, 음질 78, 노이즈제거 ON
- 화자 3명 및 배경음 없음을 번갈아 테스트

(2) 멘트 수정 결과 및 
- 1번 멘트: 20s (불안정, 문장압축)
- 2번 멘트: 19s
- 3번 멘트: 9s
- 4번 멘트 15s
- 5번 멘트: 21s (불안정, 문장정리)
- 6번 멘트: 15s
- 7번 멘트: 15s
- 8번 멘트: 21s (불안정, 문장 정리)
- 9번 멘트: 23s (불안정, 문장 압축)
- 10번 멘트: 17s
- 11번 멘트: 12s (2번 반복 자름)
- 12번 멘트: 17s
- 13번 멘트: 22s (불안정, 문장 압축)
- 14번 멘트: 6s
- 15번 멘트: 12s
- 16번 멘트: 19s
- 17번 멘트: 14s (불안정, 문장 압축, 전화번호 읽기 테스트 진행)
- 18번 멘트: 21s (불안정, 문장 압축)

(3) 중간 결론
 - 짧은 문장은 비교적 정상진행
 - 반면, 19초를 넘어가는 문장의 경우 문제 발생 빈도가 늘어나는 것을 느낌
 - 150자 내외까지가 정상적인 문장 품질이 유지되는 마지노선이라고 생각함

(4) 진행 필요
- 20초 가까이 되는 멘트들은 가끔 이상한 결과를 야기하기 때문에 지속적인 테스트 및 문장수정을 진행해야 함

2. 화자 선택 시 기존 설정 최적화 로직과 충돌이 발생하여 화자가 변경되지 않는 문제 해결

 
3. 오디오 플레이어 영역 설정정보 UI 수정 및 설정정보 추가(배경음, 엔진)

4. Zonos 엔진 Select 오픈 시 watchValues가 정상 동작하지 않던 오류 수정

===

- 멘트에 대해 생성되는 TTS를 통한 불안정을 야기하는 요소 분석 및 문장 변경을 통한 부분해소 시도
	- 연속된 요일정보는
	- 연속된 숫자 (전화번호)는 숫자사이의 쉼표(,) 추가 및 3그룹으로 마침표(.)를 작성
	- 기타 문장 내용 변경 및 내용 압축 과정 진행
	- 화자: 남성 1이 모든 문장에서 이상한 경우가 좀 많음
	- default 말하기 속도를 170 -> 160으로 변경
	- 9번멘트 축소 및 수정: "전화 주셔서 감사합니다. 저희 국제사관학원은 초중 수학 영재 올림피아드반, 중등 특목고 대비반, 고이삼 수능 단과반을 운영 중입니다. 시험 기간엔 전과목 내신 지도를 제공합니다. 김포시 풍무동과 함께 성장하는 국제사관학원이 되겠습니다. 감사합니다." 

- 음성 설정 정보 리팩토링
	- 구성 ui 변경
	- 분기 처리방식 명확하게 변경 
	- Emotion 관련 Badge에 대해 별도 컴포넌트로 분리하여 스타일관리/재사용성/가독성 향상

- 고급 설정 정보 리팩토링
	- 한 파일로 관리되던 고급 설정 정보 영역을 부모컴포넌트인 자식 컴포넌트로 분리
	- watch값으로 관리되는 많은 state를 하나의 obj로 관리하여 객체를 props로 보내고, 자식 컴포넌트에서는 구조분해할당으로 접근할 수 있도록 변경

- 엔진 선택 로직 수정
	- Default: Zonos -> Ascolta
	- 네이밍 변경: Ascolta 엔진(기본 엔진), zonos 엔진 (스탠다드 엔진(zonos))
	- 수정: 기본 엔진을 zonos로 변경, default zonos


```