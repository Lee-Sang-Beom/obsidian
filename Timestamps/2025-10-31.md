
#### Work
---
#### 프로젝트: AI Assistance CMS 
- [x] 테스트: 권한 관리 페이지 작동 테스트
	- [x] 모든 페이지에서 UI 출력에 어색함이 없는가? (PC, Mobile)
	- [x] 운영자 생성 1 : 검수, 통계, 권한 1개씩만 접근가능한 계정 생성
		- [x] admin01(검수 -> default 페이지는 검수 목록)
			- [x] 로그인 시 default로 띄워지는 페이지의 redirect가 정상적으로 진행되는가?
			- [x] 권한이 부족한 페이지에 강제 접근 시도 시 default 페이지로 redirect가 정상적으로 진행되는가?
		- [x] admin02(통계 -> default 페이지는 검수 통계)
			- [x] 로그인 시 default로 띄워지는 페이지의 redirect가 정상적으로 진행되는가?
			- [x] 권한이 부족한 페이지에 강제 접근 시도 시 default 페이지로 redirect가 정상적으로 진행되는가?
		- [x] admin03(권한 -> default 페이지는 계정 정보)
			- [x] 로그인 시 default로 띄워지는 페이지의 redirect가 정상적으로 진행되는가?
			- [x] 권한이 부족한 페이지에 강제 접근 시도 시 default 페이지로 redirect가 정상적으로 진행되는가?
	
	- [x] 운영자 생성 2 : 메뉴권한 상관없이 접근가능한 계정 생성하되, 활성화 여부 조건 검사
		- [x] 활성 시, 즉시 로그인 가능한가?
		- [x] 미활성 시, 즉시 로그인 불가한가?
	
	- [x] 운영자 삭제 
		- [x] 정상적으로 다른 계정이 삭제되는가?
		- [x] 정상적으로 내 계정이 삭제되고 로그아웃 처리 되는가?
	
	- [x] 운영자 수정
		- [x] 정상적으로 다른 계정이 수정되는가?
			- [x] 다른계정이 정상적으로 정보가 즉시 반영되는가?
			- [x] 다른계정이 정상적으로 메뉴 권한에 따라 redirect 되는가?
			- [x] 다른계정이 정상적으로 비활성화되면서 로그아웃 되는가?
		
		- [x] 정상적으로 내 계정이 수정되는가?
			- [x] 내계정이 정상적으로 정보가 즉시 반영되는가?
			- [x] 내계정이 정상적으로 메뉴 권한에 따라 redirect 되는가?
			- [x] 내계정이 정상적으로 비활성화되면서 로그아웃 되는가?


- [x] 수정사항 반영
	- [x] 공통: 더이상 권한이 없는 메뉴에 접근 시, 계정 정보로 공통 이동하지 않음. (getInitialPathByPermissions)
		- 사용자 권한에 따라 APPROVE 권한이 있으면, 검수 목록으로 이동
		- APPROVE는 없고 STATISTICS가 있으면 검수 통계로 이동
		- 둘 다 없으면 계정 관리로 이동
	- [x] 공통: 권한이 없는 메뉴가 사라지는 대신, disabled 형태로 UI에 표시되고, 클릭 시 권한이 부족하다는 안내 메시지 출력
	- [x] 공통: 내 정보 조회 API에서 오류 발생 시, 로그아웃 할 수 있도록 수정
	- [x] 공통: 각 파일에서 정의되고 사용되던 로그아웃 핸들러를 `use-logout.ts`라는 hooks를 생성하고 호출하는 방식으로 리팩토링 진행
	- [x] 공통: 계정삭제 후 계정정보 페이지로 이동한다음 몇초있다가 로그아웃되는 문제 수정
	- [x] 로그인 페이지: 로그인 실패 메시지를 폼 아래에 두면 모바일 환경에서 스크롤을 해야만 확인할 수 있어서 불편함. toast를 사용하여 개선

	- [x] 권한 관리 페이지: 권한 관리 페이지에서 발생하는 로그아웃 기능에 대한 주도 컴포넌트 로직 수정
		- **활성상태 변경**: `app-side-bar.tsx`에서 비활성화된 상태 감지 후 로그아웃 유도
		    - `EditUserStatusAdminForm`에서는 상태 변경만 수행하고 로그아웃 처리는 하지 않음
		    - `app-side-bar.tsx`의 `useInactiveAccountCheck` 훅이 `useMyInfoQuery`의 결과를 감시하여 `userStatus === 'INACTIVE'`인 경우 자동으로 로그아웃 처리
		    - 이유:
				 - 단일 책임 원칙: 폼 컴포넌트는 상태 변경에만 집중, 계정 상태 감시는 레이아웃에서 일괄 처리
				 - 일관성: `app-side-bar`에서 이미 API 에러와 비활성 계정 체크를 수행 중이므로 로직이 한 곳에 집중됨
				 - 다양한 경로 대응: 자기가 직접 변경, 다른 관리자가 변경, API 자동 정책 등 모든 비활성화 경로를 커버
				 - React Query 자동 동기화: `useMyInfoQuery`가 주기적으로 refetch하므로 어떤 경로로 비활성화되든 자동 감지 가능

		 - **계정 삭제**: `delete-admin-menu-item.tsx`에서 '내 계정' 삭제 시, 삭제 작업 완료 후 `onSuccess` 콜백에서 즉시 로그아웃 처리
			 - `deleteAdmin` mutation의 `onSuccess`에서 `user?.id === id` 조건으로 자기 계정 삭제 확인 후 즉시 `logout()` 호출
			 - 이유:
				 - 삭제된 계정으로는 더 이상 API 요청을 할 수 없으므로 즉시 세션 종료 필요
				 - `app-side-bar`의 에러 체크만으로는 로그아웃이 보장되지 않음: React Query는 에러 발생 시에도 이전 캐시 데이터를 유지하므로 `useMyInfoQuery`가 에러를 반환해도 `data`는 여전히 존재하여 UI가 정상적으로 렌더링될 수 있음
				 - 명시적 로그아웃: `useLogout`에서 캐시 제거 + 로그인 페이지 이동을 확실하게 처리하여 예기치 않은 UI 상태 방지