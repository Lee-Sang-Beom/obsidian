
 > NaverMap.tsx
```tsx


"use client";

import { useEffect, useLayoutEffect, useRef, useState } from "react";
import useGeoLocation, { GeoLocationProps } from "@/hooks/map/useGeoLocation";
import {
  getNewNaverMapInstance,
  setNewNaverMarker,
  setNaverMapEventListener,
  setNewNaverPolygon,
} from "@/utils/map/naverMapUtils";
import { DEFAULT_MAP_ZOOM_LEVEL } from "@/utils/map/commonMapUtils";
import { GeometryCoordinatesInterface } from "@/types/map/commonMap";
import { NaverPolygonOptionInterface } from "@/types/map/naverMap";
import { GimhaeGibunPolyResponse } from "./GimhaeGibunPolyResponse";

interface GimhaeGibunTongPolygonInterface {
  tong: number;
  geomLists: GeometryCoordinatesInterface[][];
}
export default function NaverMap({
  data,
}: {
  data: GimhaeGibunPolyResponse[];
}) {
  const [location, setLocation] = useState<GeoLocationProps | null>(null);
  const mapRef = useRef<any | null>(null);
  const [zoomLevel, setZoomLevel] = useState<number>(DEFAULT_MAP_ZOOM_LEVEL);
  const currentLocationQuery = useGeoLocation();

  const [polygonList, setPolygonList] = useState<
    GimhaeGibunTongPolygonInterface[] | null
  >(null);

  useLayoutEffect(() => {
    if (data) {
      // tong, split (공백, 쉼표기준)
      const splitList = data.map((oneDepthData: GimhaeGibunPolyResponse) => {
        return {
          tong: oneDepthData.tong,
          geomLists: oneDepthData.geom
            .split(" ")
            .map((twoDepthData: string, idx: number) => {
              const latLngNumberList = twoDepthData.split(",");

              return {
                lat: parseFloat(latLngNumberList[1]),
                lng: parseFloat(latLngNumberList[0]),
              };
            }),
        };
      });

      // 객체 형태로 tong별 geomList 분류
      const tongSeparatedObj = splitList.reduce(
        (acc, current) => {
          const { tong, geomLists } = current;
          if (!acc[tong]) {
            acc[tong] = [];
          }

          const numberGeomLists: GeometryCoordinatesInterface[] = geomLists.map(
            (geom: GeometryCoordinatesInterface) => {
              return {
                lat: Number(geom.lat),
                lng: Number(geom.lng),
              };
            }
          );
          acc[tong].push(numberGeomLists);
          return acc;
        },
        {} as { [tong: number]: GeometryCoordinatesInterface[][] }
      );

      // 객체를 배열 형태로 변환
      const tongSeparatedList: GimhaeGibunTongPolygonInterface[] = Object.keys(
        tongSeparatedObj
      ).map((tong) => {
        return {
          tong: Number(tong),
          geomLists: tongSeparatedObj[Number(tong)],
        };
      });

      setPolygonList(tongSeparatedList);
    } else {
      setPolygonList(null);
    }
  }, [data]);

  /**
   * @useLayoutEffect : 클라이언트 렌더링 전, 사용자 위치 조회
   */
  useLayoutEffect(() => {
    if (
      currentLocationQuery.loaded &&
      currentLocationQuery.coordinates !== null
    ) {
      setLocation(currentLocationQuery);
    } else {
      setLocation(null);
    }
  }, [currentLocationQuery]);

  useEffect(() => {
    if (
      !location ||
      !location.coordinates ||
      !polygonList ||
      !mapRef ||
      !mapRef.current
    ) {
      return;
    }

    // Naver Map 생성
    const map = getNewNaverMapInstance({
      lat: 35.2358171,
      lng: 128.92356417,
    });
    const colors = [
      { fillColor: "#ff0000", strokeColor: "#ff4d4d" }, // Red
      { fillColor: "#8bff8b", strokeColor: "#8bff8b" }, // Green
      { fillColor: "#0000ff", strokeColor: "#4d4dff" }, // Blue
      { fillColor: "#ffff00", strokeColor: "#ffff4d" }, // Yellow
      { fillColor: "#ff54ff", strokeColor: "#ff4dff" }, // Magenta
      { fillColor: "#00ffff", strokeColor: "#4dffff" }, // Cyan
      { fillColor: "#ff9900", strokeColor: "#ffb84d" }, // Orange
      { fillColor: "#9900ff", strokeColor: "#b84dff" }, // Purple
      { fillColor: "#015e39", strokeColor: "#015e39" }, // Teal
      { fillColor: "#ff0066", strokeColor: "#ff4d99" }, // Pink
      { fillColor: "cyan", strokeColor: "cyan" }, // cyan
      { fillColor: "#66ff00", strokeColor: "#99ff4d" }, // Lime
      { fillColor: "#0066ff", strokeColor: "#4d99ff" }, // Sky Blue
      { fillColor: "#ff6600", strokeColor: "#ff994d" }, // Coral
      { fillColor: "#0041cc", strokeColor: "#0041cc" }, // Dark Purple
    ];

    const naverPolygonOption: NaverPolygonOptionInterface = {
      fillOpacity: 0.3,
      strokeOpacity: 0.6,
      strokeWeight: 3,
      clickable: true,
    };
    polygonList?.map(
      (polygon: GimhaeGibunTongPolygonInterface, idx: number) => {
        const { geomLists, ...rest } = polygon;

        const naverMultiPolygon = setNewNaverPolygon(map, geomLists, {
          ...naverPolygonOption,
          ...colors[idx],
        });

        setNaverMapEventListener(naverMultiPolygon, "mouseover", () => {
          naverMultiPolygon.setOptions({
            paths: geomLists,
            ...naverPolygonOption,
            strokeColor: "#000",
            fillColor: "#000",
          });
        });
        setNaverMapEventListener(naverMultiPolygon, "mouseout", () => {
          naverMultiPolygon.setOptions({
            paths: geomLists,
            ...naverPolygonOption,
            ...colors[idx],
          });
        });
      }
    );
  }, [location, polygonList]);

  return (
    <div
      ref={mapRef}
      id="naverMap"
      style={{ width: "100%", height: "100vh", position: "relative" }}
    >
      <div
        style={{ position: "absolute", top: 0, right: "50%", zIndex: 999 }}
      >{`현재 zoolLevel : ${zoomLevel} `}</div>
    </div>
  );
}



```