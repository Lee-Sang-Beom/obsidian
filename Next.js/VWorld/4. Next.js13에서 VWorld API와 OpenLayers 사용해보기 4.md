
#### 1. 좌표 선으로 연결하기 `(returnFireDmgeVectorLayer)`

- 이전 장에서, `returnFireDmgeVectorLayer()` 메소드를 사용한 곳이 있었다. 이 메소드는 `string` 형태로 된 좌표 리스트들을 `공백(" ")` 단위로 분리하여, 좌표 간 사이를 선으로 이은 `Feature`를 포함한 `VectorLayer`를 반환하는 역할을 한다.

- 결과는 아래 사진과 같다.
![[returnFireDmgeVectorLayer.png]]

- 구현 과정은 아래와 같다.
	1. 위도, 경도값은 `쉼표(,)`로, 각 리스트는 `공백(" ")`으로 분리된 `string`을 배열로 재구성한다.
	2. 다시 시작점까지 선을 이을 수 있도록 고려하여, `lineCoordinates` 배열을 구성한다.
	3. 필요한 `Feature`를 생성한다. (본 프로젝트에서는 `Polygon, LineString` 둘 다 사용해보고자 한다.)
	4. `Feature`를 `VectorLayer`의 `source`로 연결하여, `VectorLayer`를 반환한다.

```tsx
export const returnFireDmgeVectorLayer = (
  detailCompanyData: CompanyDetailResponse,
  layerName: string,
  map: any
) => {
  // 위도, 경도값은 `쉼표(,)`로, 각 리스트는 `공백(" ")`으로 분리된 `string`을 배열로 재구성한다.)
  const detailGeomStringList = detailCompanyData.geom.split(" ");
  const detailGeomNumberList = detailGeomStringList.map((item) => {
    const latLotArr = item.split(",");
    return [parseFloat(latLotArr[0]), parseFloat(latLotArr[1])];
  });
  const polygonCoordinates = detailGeomNumberList;
  // 다시 시작점까지 선을 이을 수 있도록 고려하여, `lineCoordinates` 배열을 구성한다.
  const lineCoordinates = [...detailGeomNumberList, detailGeomNumberList[0]];

  // 선택 1: Polygon 
  const polygonFeature = new Feature<Geometry>({
    geometry: new Polygon([
      polygonCoordinates.map((coord) => {
        return fromLonLat(coord);
      }),
    ]),
    geometryName: detailCompanyData.companyNm,
  });

  // 좌표 배열을 Point 객체로 변환
  const linePoints = lineCoordinates
    .map((coord) => fromLonLat(coord))
    .map((point) => new Point(point));

  // 선택 2: LineString
  // 선을 생성하고 선의 좌표를 설정
  const lineGeometry = new LineString(
    linePoints.map((point) => point.getCoordinates())
  );

  // 선을 나타내는 Feature 생성
  const lineFeature = new Feature({
    geometry: lineGeometry,
    geometryName: "line",
  });

  // line의 색깔 및 스타일 지정
  lineFeature.setStyle(createFireDmgeLineStyle);

  // `Feature`를 `VectorLayer`의 `source`로 연결하여, `VectorLayer`를 반환한다.
  return new VectorLayer({
    className: "fireDmgeVectorLayer",
    properties: { name: layerName },
    source: new VectorSource({
      features: [polygonFeature, lineFeature],
    }),
    zIndex: 999,
  });
};
```


#### 2. 원 그리기 (`returnExplDmgeVectorLayer`)

- 이전 장에서, `returnExplDmgeVectorLayer()` 메소드를 사용한 곳이 있었다. 이 메소드는 `mapCenter` 혹은 `detailCompanyData`의 위도/경도
- 결과는 아래와 같다.
![[returnExplDmgeVectorLayer.png]]