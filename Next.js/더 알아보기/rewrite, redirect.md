
#### 1. rewrite

- Next.js에서 제공하는 `rewrite` 기능은 사용자가 특정 `path`로 이동 시, 정해진 화면이 보이도록 한다.
- 사용자가 입력한 **URL 자체는 그대로 보여지지만**, 실제 페이지는 **다른 페이지의 내용을 출력하도록 구현**된다.
	- 즉, 대상 경로를 숨기고 사용자가 사이트에서의 위치를 변경하지 않은 것처럼 **URL 프록시** 역할을 한다.
		- **URL 프록시** : 클라이언트와 서버 간의 통신에서 중간에 위치하여 클라이언트로부터의 요청을 받아서 서버로 전달하고, 서버로부터의 응답을 클라이언트로 전달해주는 서비스이다. 이는 클라이언트가 직접 서버와 통신하지 않고 중간 프록시를 통해 통신하게 되는 구조를 말한다.
			1. **보안 강화**: 클라이언트와 직접 통신하지 않고 중간에 프록시를 두면 서버의 실제 IP 주소를 숨길 수 있어 보안을 강화할 수 있다.
			2. **캐싱**: 프록시는 이전에 요청된 리소스를 캐시하여 동일한 요청이 들어왔을 때 서버에 요청을 보내지 않고 캐시된 데이터를 반환함으로써 네트워크 성능을 향상시킬 수 있다.
			3. **로드 밸런싱**: 다수의 서버에 요청을 분산하는 로드 밸런싱을 수행하여 서버의 부하를 분산할 수 있다.
			4. **사용자 지역 기반 라우팅**: 프록시는 사용자의 위치를 파악하고 해당 위치에 가장 가까운 서버로 요청을 전달하여 지역별 서비스를 제공할 수 있다.
			5. **서비스 접근 제어**: 특정 사용자나 IP 주소에서의 요청을 필터링하거나 차단하여 보안을 강화하거나 접근 권한을 관리할 수 있다.

- 속성은 아래와 같다.
	- `source`: 들어오는 요청 경로 패턴을 나타낸다.
	- `destination`: 해당 요청이 라우팅되어야 하는 대상 경로를 나타낸다.
	- `basePath`: 주로 외부 리라이팅에 사용되며, 기본 경로를 설정하는 속성이다. 이 값을 false로 설정하면 `basePath`가 일치할 때 포함되지 않는다. 
	- `locale`: `locale`을 설정한다. `false` 또는 `undefined`로 설정하면 매칭 시 `locale`이 포함되지 않는다.
	- `has`: 요소에 대한 정보를 담은 객체의 배열이다. 각 객체는 `type`, `key`, `value` 속성을 가지고 있다.
	- `missing`: 부재하는 요소에 대한 정보를 담은 객체의 배열이다. 각 객체는 `type`, `key`, `value` 속성을 가지고 있다.

- 기본적인 사용법은 아랭

```js
module.exports = {
  async rewrites() {
    return {
      beforeFiles: [
        // 이 rewriteing은 헤더/리다이렉션 이후에 확인되며
        // 페이지 파일을 override할 수 있도록 하기 위해
        // _next/public 파일을 포함한 모든 파일 이전에 확인됩니다.
        {
          source: '/some-page',
          destination: '/somewhere-else',
          has: [{ type: 'query', key: 'overrideMe' }],
        },
      ],
      afterFiles: [
        // 이 rewriting은 페이지/퍼블릭 파일이 확인된 후에
        // 동적 경로 이전에 확인됩니다.
        {
          source: '/non-existent',
          destination: '/somewhere-else',
        },
      ],
      fallback: [
        // 이 rewriting은 page/public 파일과
        // 동적 경로가 확인된 후에 확인됩니다.
        {
          source: '/:path*',
          destination: `https://my-old-site.com/:path*`,
        },
      ],
    }
  },
}
```
#### 2. redirect

- Next.js에서 제공하는 `redirect` 기능 또한 사용자가 특정 `path`로 이동 시, 정해진 화면이 보이도록 한다.
- 다만, **주소창의 URL 자체가 이동하고자 하는 페이지의 URL로 변경**되어 이동하는 점이 `rewrite`와의 차이이다.

