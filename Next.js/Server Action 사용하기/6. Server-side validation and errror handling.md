
- 기본적인 클라이언트 측 양식 유효성 검사는 `required` 및 `type="email"`과 같은 HTML 유효성 검사를 사용하는 것이 좋다.
	- 보다 고급스러운 서버 측 유효성 검사를 원한다면, 데이터를 전송하기 전에 양식 필드를 확인하는 라이브러리인 `zod`를 사용할 수 있다.
```ts
'use server'

import { z } from 'zod'

const schema = z.object({
  email: z.string({
    invalid_type_error: '잘못된 이메일',
  }),
})

export default async function createUser(formData: FormData) {
  const validatedFields = schema.safeParse({
    email: formData.get('email'),
  })

  // 양식 데이터가 유효하지 않은 경우 일찍 반환합니다.
  if (!validatedFields.success) {
    return {
      errors: validatedFields.error.flatten().fieldErrors,
    }
  }

  // 데이터 mutate
}
```

- 서버에서 필드에 대하여 유효성을 검사한 이후에는 action에서 직렬화 가능한 객체를 반환하고, React의 `useFormState hook`을 사용하여 사용자에게 메시지를 표시할 수 있다.
	- `useFormState`에 action을 전달하면, action의 함수 시그니처가 새로운 `prevState` 또는 `initialState` 매개변수를 첫 번째 인수로받는 것으로 변경된다.
	- `useFormState` React hook이므로 클라이언트 컴포넌트에서 사용해야 한다.