
- 이전 Chapter에서는 Partial Prerendering을 통해, Next.js에서 경로의 정적 부분을 미리 렌더링하고, 동적 부분은 사용자가 요청할 때까지 지연시키는 방법에 대해 알아보았다.

- 이번 Chapter에서는 URL 검색 매개변수를 사용하여 검색 및 페이징을 구현하는 방법에 대해 알아볼 것이다.


#### 1. Starting Code (경로 및 파일 만든 후, 코드 붙여넣기)

- 본격적으로 시작하기 앞서, `/app/dashboard/invoices/page.tsx` 경로에 파일을 추가하 아래 코드를 붙여넣어주자.
	- `<Search/>`: 사용자가 특정 송장을 검색할 수 있도록 하는 컴포넌트
	- `<Pagination/>`: 사용자가 송장의 페이지 간을 탐색할 수 있게 하는 컴포넌트
	- `<Table/>`: 송장을 표시하는 컴포넌트
```tsx
import Pagination from "@/app/ui/invoices/pagination";
import Search from "@/app/ui/search";
import Table from "@/app/ui/invoices/table";
import { CreateInvoice } from "@/app/ui/invoices/buttons";
import { InvoicesTableSkeleton } from "@/app/ui/skeletons";
import { Suspense } from "react";
import { lusitana } from "../ui/font";

export default async function Page() {
  return (
    <div className="w-full">
      <div className="flex w-full items-center justify-between">
        <h1 className={`${lusitana.className} text-2xl`}>Invoices</h1>
      </div>
      <div className="mt-4 flex items-center justify-between gap-2 md:mt-8">
        <Search placeholder="Search invoices..." />
        <CreateInvoice />
      </div>
      {/*  <Suspense key={query + currentPage} fallback={<InvoicesTableSkeleton />}>
        <Table query={query} currentPage={currentPage} />
      </Suspense> */}
      <div className="mt-5 flex w-full justify-center">
        {/* <Pagination totalPages={totalPages} /> */}
      </div>
    </div>
  );
}
```

- 검색 기능은 클라이언트와 서버 두 곳에 걸쳐 작동한다. 대체적인 과정은 아래와 같다
	1. 사용자가 클라이언트에서 송장을 검색하면 URL 매개변수가 업데이트된다,
	2. 업데이트된 매개변수를 통해 서버에서 데이터를 불러온다.
	3. 테이블 컴포넌트는 새로운 데이터를 기반으로 서버에서 다시 렌더링된다.


###### ※ 