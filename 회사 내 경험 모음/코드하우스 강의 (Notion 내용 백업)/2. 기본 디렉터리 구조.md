
#### 1. Next.js에서 가장 중요한 디렉터리

- Next.js의 디렉터리 구조는 React 디렉터리 구조들을 확장한 개념이라고 이해하면 된다.\
    - 실제로 React와 크게 달라진 것도 없으니, _**언제 또 다시 처음부터 배우냐? 🤷‍♀️**_ 같은 걱정은 안해도 된다.

- 우리가 중점적으로 봐야하는 디렉터리는 아래와 같다.
![[next.js 디렉터리 구조.png]]


#### 2. 📁 Directory: app

- 앞서, Next.js를 설치할 때 app routing을 Yes로 선택하라고 언급했다.
    - Next.js의 v13 이후부터는 pages 라우팅에서, app 라우팅을 업데이트하는 방향으로 업데이트가 이루어지기 때문에 언급한 내용이다.

- app 디렉터리 하위에는 또 중요한 게 2가지가 있다.
    - 사실 이거 2가지만 알고가면 app routing의 70% 정도는 배웠다고 보면 된다.
![[app 디렉터리 구조.png]]

##### 📖`page.tsx`
- 이 파일은 app routing에 있어, 가장 기본적으로 보여지는 페이지 파일이다.

- 만약 위 이미지와 같은 경로에서, `app` 디렉터리 하위에 `page.tsx` 파일을 아래 코드와 같이 작성하면 `/` 경로에 Hello라는 글자가 나타나는 것을 확인할 수 있게 된다.
```bash
export default function Page() {
  return <div>Hello</div>;
}
```
![[page.tsx.png]]

- 예시를 하나 더 들어보자, `ip/pass`라는 경로에 보여질 페이지를 만들고 싶으면 어떻게 해야할까?
    - `ip` 디렉터리 안에 `pass`라는 디렉터리를 만들고, 그 안에 `page.tsx`라는 파일을 만들면 된다.
![[app 디렉터리 구조 예시 2 2.png]]
![[ip-pass-page.tsx.png]]

##### 📖 `layout.tsx`
- 위 이미지 중에, 왼쪽에 계속 메뉴바가 나오는 것이 보이는가?
    - 이렇게, 여러 페이지를 이동해도 계속 똑같은 요소가 나와야 할 때 요긴하게 사용 가능한 것이 `layout.tsx` 파일이다.
    - 이 파일은 Next.js 13 이상에서 도입된 `App Router`의 일부로, 페이지의 레이아웃을 정의하는 데 사용되는 파일이다.
```tsx
import type { Metadata } from "next";
import RecoilRootProvider from "@/provider/RecoilProvider";
import NextAuthProvider from "@/provider/NextAuthProvider";
import "@/styles/globals.scss";
import localFont from "next/font/local";
import AutoAlert from "@/components/common/AutoAlert/AutoAlert";
import ReactQueryProvider from "@/provider/ReactQueryProvider";
import { ApiResponse } from "@/types/common/commonType";
import { AuthMenuTreeResponse } from "@/types/common/MenuType";
import { dummyMenuData } from "@/dummy/menu";
import { menuByDepth } from "@/utils/utils";
import SideMenu from "@/components/common/Menu/SideMenu/SideMenu";

export const metadata: Metadata = {
  title: "코드하우스 - 대원공업",
  description: "코드하우스 - 대원공업",
};

const pretendard = localFont({
  src: [
    {
      path: "../fonts/Pretendard/Pretendard-Light.woff2",
      weight: "300",
      style: "normal",
    },
    {
      path: "../fonts/Pretendard/Pretendard-Regular.woff2",
      weight: "400",
      style: "normal",
    },
    {
      path: "../fonts/Pretendard/Pretendard-Medium.woff2",
      weight: "500",
      style: "normal",
    },
    {
      path: "../fonts/Pretendard/Pretendard-Bold.woff2",
      weight: "700",
      style: "normal",
    },
  ],
  variable: "--font-pretendard",
  display: "fallback",
});

const scdream = localFont({
  src: [
    {
      path: "../fonts/SCDream/SCDream1.woff",
      weight: "100",
      style: "normal",
    },
    {
      path: "../fonts/SCDream/SCDream2.woff",
      weight: "200",
      style: "normal",
    },
    {
      path: "../fonts/SCDream/SCDream3.woff",
      weight: "300",
      style: "normal",
    },
    {
      path: "../fonts/SCDream/SCDream4.woff",
      weight: "400",
      style: "normal",
    },
    {
      path: "../fonts/SCDream/SCDream5.woff",
      weight: "500",
      style: "normal",
    },
    {
      path: "../fonts/SCDream/SCDream6.woff",
      weight: "600",
      style: "normal",
    },
    {
      path: "../fonts/SCDream/SCDream7.woff",
      weight: "700",
      style: "normal",
    },
    {
      path: "../fonts/SCDream/SCDream8.woff",
      weight: "800",
      style: "normal",
    },
    {
      path: "../fonts/SCDream/SCDream9.woff",
      weight: "900",
      style: "normal",
    },
  ],
  variable: "--font-scdream",
  display: "fallback",
});

export default async function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  const { data: menuData }: ApiResponse<AuthMenuTreeResponse[]> = dummyMenuData;
  const {
    depth1Menu: depth1MenuData,
    depth2Menu: depth2MenuData,
    depth3Menu: depth3MenuData,
  } = menuByDepth(menuData, "CMS");

  return (
    <html lang="ko">
      <body className={`${pretendard.variable} ${scdream.variable}`}>
        <div className="container">
          <RecoilRootProvider>
            <ReactQueryProvider>
              {/* <NextAuthProvider> */}
              <SideMenu
                session={null}
                user={null}
                menuData={menuData as AuthMenuTreeResponse[]}
              />
              <div className="s_container">{children}</div>
              <AutoAlert />
              {/* </NextAuthProvider> */}
            </ReactQueryProvider>
          </RecoilRootProvider>
        </div>
      </body>
    </html>
  );
}

```

- 이 코드는 위 이미지에서 보이는 화면의 `/app/layout.tsx`파일이다.
    - 지금은 다른건 둘째치고 아래 부분에 집중해보자.

```tsx
<div className="container">
  <RecoilRootProvider>
    <ReactQueryProvider>
      {/* <NextAuthProvider> */}
      <SideMenu
        session={null}
        user={null}
        menuData={menuData as AuthMenuTreeResponse[]}
      />
      <div className="s_container">{children}</div>
      <AutoAlert />
      {/* </NextAuthProvider> */}
    </ReactQueryProvider>
  </RecoilRootProvider>
</div>
```

- 여기서, 라이브러리를 사용하기 위한 Provider를 제외하면 아래와 같은 결과가 나온다.
```tsx
<div className="container">
    <SideMenu
      session={null}
      user={null}
      menuData={menuData as AuthMenuTreeResponse[]}
    />
    <div className="s_container">{children}</div>
</div>
```

- `{children}` 은 React에서 매우 중요한 개념이며, React 컴포넌트가 다른 컴포넌트를 감싸거나 포함할 때 그 내부에 삽입된 내용을 나타내는 특수한 프로퍼티이다.
    - 이 프로퍼티는 React 컴포넌트가 자신의 자식 요소들을 렌더링할 수 있게 해준다.
    - 쉽게 말해, 해당 디렉터리 하위의 모든 파일과 내부 코드는 저 `{children}` 위치에 들어가서 화면에 표시된다고 생각하면 된다.

- 그리고, `<SideMenu/>`는 딱봐도 한 편에 붙어서 출력되는 메뉴 컴포넌트라고 예상해볼 수 있을 것이다. (실제로 맞다)
    - 해당 레이아웃 파일은 `/app` 경로에 위치하고 있기 때문에, app routing 하위의 모든 페이지에는 `<SideMenu/>`가 표시된다.


#### 📁 3. Directory: public
- Next.js에서 `public` 디렉터리는 정적 파일(static files)을 저장하는 곳이다
    - 이 디렉터리에 있는 파일들은 빌드 시에 서버에 그대로 복사되며, 사용자는 브라우저를 통해 이 파일들에 직접 접근할 수 있다.

- 만약, 특정 컴포넌트에서 `public/img/favicon.ico` 파일에 접근하고 싶으면 어떻게 해야할까?
    - 어느 컴포넌트든 간에, 아래처럼 `/` 경로를 `/public`으로 간주하여 접근할 수 있다.

```html
 <img src="/img/favicon.ico" alt="favicon 로고" />
```


#### 📃 4. File: `.env`, `.env.development`
- 프로젝트 루트 경로에 위치한 해당 파일은 애플리케이션에서 환경 변수(Environment Variables)를 정의하고 관리하는 데 사용된다.
- 민감한 정보를 코드에 직접 작성하지 않을 때 유용하며, 어떤 라이브러리는 별도로 필요한 KEY 값이 있다면, 이 파일을 알아서 참조하기도 한다.

```shell
# 클라이언트에서 환경변수 접근을 위해서는 NEXT_PUBLIC_ 네이밍 규칙 존재 (특정 라이브러리에서 접근하는 요소는 예외도 있음)

NEXT_PUBLIC_HOST=http://localhost:8080
NEXTAUTH_URL=
NEXTAUTH_SECRET=
```

- Next.js에서는 이 환경변수를 클라이언트에서 참조하기 위해서는 `NEXT_PUBLIC_`을 앞에 적어줘야 하는 사전 네이밍 규칙이 존재한다.

##### ※ 차이
- `.env` : 모든 환경에서 default로 적용할 환경변수를 정의한다. 가장 우선순위가 낮다.
- `.env.development` : 개발 환경에서 사용되며, `.env`보다 우선순위가 높다. (개발환경에서만)
    - 디버깅, 테스트 등의 목적으로 사용된다.

##### ※ 참고
- 배포, 빌드와 같은 production 환경에서 `.env`보다 우선시되는 파일은 `.env.production` 이다.


#### 5. 📃File: `package.json`

- **npm(Node Package Manager)** 은 Node.js에서 사용하는 모듈들을 패키지로 만들어 관리하고 배포하는 역할을 한다.
- React 애플리케이션 혹은 자바스크립트를 이용하여 프로젝트를 개발해본 사람이라면, 한 번쯤은 `package.json`이라는 파일이 존재하는 것을 보았을 것이다.
- `npm init` 이라는 명령어는 Node.js 프로젝트의 초기 설정을 진행하기 위해 사용된다.
    - 이 명령어를 실행하면 프로젝트의 설정 정보를 담고 있는 `package.json` 파일을 생성할 수 있다.

##### ※ 개념
- 그럼, 이 `package.json` 파일은 대체 무엇일까?
    - `package.json`은 **프로젝트의 정보, 의존성 패키지 정보, 스크립트 명령어 등을 포함하는 메타 데이터 파일이다.**
    - `package.json` 파일이 담고 있는 정보는 아래와 같다.

> **정보**
- name: 프로젝트 이름 
- version: 프로젝트 버전 
- dependencies: 프로젝트가 의존하는 패키지 목록 
- devDependencies: 개발 환경에서만 필요한 패키지들의 목록
- scripts: 프로젝트에서 사용할 수 있는 스크립트 명령어들의 목록

![[사용 이미지/회사 내 경험 모음/코드하우스 강의 (Notion 내용 백업)/2. 기본 디렉터리 구조/package.json.png]]